{"ast":null,"code":"import { ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\nimport { Validators, FormGroup, FormControl } from '@angular/forms';\nimport * as _ from 'lodash';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../../../../../../core/admin/service/config.service\";\nimport * as i5 from \"../../../../../../../core/admin/cms/banners/banner.sandbox\";\nimport * as i6 from \"../../../../../../../core/admin/cms/banners/banner.service\";\nimport * as i7 from \"src/core/admin/shared/ckeconfiq/ckeconfiq.service\";\nimport * as i8 from \"../../shared/banner-layout/banner-layout.component\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"ng2-ckeditor\";\nimport * as i11 from \"@angular/material/radio\";\nimport * as i12 from \"@ng-select/ng-select\";\nimport * as i13 from \"@ngx-translate/core\";\nconst _c0 = [\"filePath\"];\n\nfunction BannerAddComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"CMS.BannerError.BannerTitleIsRequired\"));\n  }\n}\n\nfunction BannerAddComponent_div_30_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"CMS.BannerError.MustBe255CharacterLong\"), \" \");\n  }\n}\n\nfunction BannerAddComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtemplate(1, BannerAddComponent_div_30_div_1_Template, 3, 3, \"div\", 42);\n    i0.ɵɵtemplate(2, BannerAddComponent_div_30_div_2_Template, 3, 3, \"div\", 43);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f.bannerTitle.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.bannerForm.get(\"bannerTitle\").hasError(\"maxlength\"));\n  }\n}\n\nfunction BannerAddComponent_div_53_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 1, \"CMS.BannerError.LinkIsRequired\"), \" \");\n  }\n}\n\nfunction BannerAddComponent_div_53_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtemplate(1, BannerAddComponent_div_53_div_4_div_1_Template, 3, 3, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.f.bannerLink.errors.required);\n  }\n}\n\nfunction BannerAddComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"label\");\n    i0.ɵɵtext(2, \"Custom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function BannerAddComponent_div_53_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.bannerLink = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, BannerAddComponent_div_53_div_4_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.bannerLink);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.submitted && ctx_r1.f.bannerLink.errors);\n  }\n}\n\nfunction BannerAddComponent_div_54_ng_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r17 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", product_r17.productSlug);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(product_r17.name);\n  }\n}\n\nconst _c1 = function () {\n  return {\n    standalone: true\n  };\n};\n\nfunction BannerAddComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"label\");\n    i0.ɵɵtext(2, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ng-select\", 46);\n    i0.ɵɵlistener(\"ngModelChange\", function BannerAddComponent_div_54_Template_ng_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.productslugvalue = $event;\n    })(\"change\", function BannerAddComponent_div_54_Template_ng_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.productslug($event);\n    });\n    i0.ɵɵtemplate(4, BannerAddComponent_div_54_ng_option_4_Template, 2, 2, \"ng-option\", 47);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"editableSearchTerm\", true)(\"dropdownPosition\", \"bottom\")(\"ngModel\", ctx_r2.productslugvalue)(\"ngModelOptions\", i0.ɵɵpureFunction0(7, _c1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 5, ctx_r2.sandbox.ProductLists$));\n  }\n}\n\nfunction BannerAddComponent_div_55_ng_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ng-option\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const arr_r22 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", arr_r22.categorySlug);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(arr_r22.name);\n  }\n}\n\nfunction BannerAddComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"label\");\n    i0.ɵɵtext(2, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ng-select\", 48);\n    i0.ɵɵlistener(\"ngModelChange\", function BannerAddComponent_div_55_Template_ng_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.categoryslugvalue = $event;\n    })(\"change\", function BannerAddComponent_div_55_Template_ng_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.categoryslug($event);\n    });\n    i0.ɵɵtemplate(4, BannerAddComponent_div_55_ng_option_4_Template, 2, 2, \"ng-option\", 47);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.categoryslugvalue)(\"ngModelOptions\", i0.ɵɵpureFunction0(7, _c1))(\"editableSearchTerm\", true)(\"dropdownPosition\", \"bottom\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 5, ctx_r3.sandbox.categoryLists$));\n  }\n}\n\nfunction BannerAddComponent_div_63_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 1, \"CMS.BannerError.PositionIsRequired\"), \" \");\n  }\n}\n\nfunction BannerAddComponent_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtemplate(1, BannerAddComponent_div_63_div_1_Template, 3, 3, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.f.position.errors.required);\n  }\n}\n\nfunction BannerAddComponent_div_79_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"CMS.Error.ThisFieldIsRequired\"));\n  }\n}\n\nfunction BannerAddComponent_div_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtemplate(1, BannerAddComponent_div_79_div_1_Template, 3, 3, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.f.active.errors.required);\n  }\n}\n\nfunction BannerAddComponent_div_95_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"catalog.Error.Imageisrequired\"));\n  }\n}\n\nfunction BannerAddComponent_div_95_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 49);\n    i0.ɵɵtemplate(1, BannerAddComponent_div_95_div_1_Template, 3, 3, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.f.imageInput.errors.required);\n  }\n}\n\nfunction BannerAddComponent_div_96_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 50);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"CMS.BannerError.ImageShouldBeLessThan2MB\"));\n  }\n}\n\nfunction BannerAddComponent_div_97_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 50);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"CMS.BannerError.PleaseUploadImagesOnly(.png,.jpg,.jpeg)\"));\n  }\n}\n\nconst _c2 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nconst _c3 = function (a0) {\n  return {\n    \"Validationcolor\": a0\n  };\n};\n\nconst _c4 = function (a0) {\n  return {\n    \"error-fields\": a0\n  };\n};\n\nexport let BannerAddComponent = /*#__PURE__*/(() => {\n  class BannerAddComponent {\n    constructor(modalService, modalService2, router, fb, route, changeDetectRef, configService, sandbox, service, ckeconfiqservice) {\n      this.modalService = modalService;\n      this.modalService2 = modalService2;\n      this.router = router;\n      this.fb = fb;\n      this.route = route;\n      this.changeDetectRef = changeDetectRef;\n      this.configService = configService;\n      this.sandbox = sandbox;\n      this.service = service;\n      this.ckeconfiqservice = ckeconfiqservice;\n      this.ImageUrl = '';\n      this.submitted = false;\n      this.id = '';\n      this.subscriptions = [];\n      this.imageTypeError = false;\n      this.imageSizeError = false;\n      this.queryDetails = {};\n      this.customproduct = 1;\n      this.new = {};\n      this.checkedval = 1;\n      this.config = this.ckeconfiqservice.getckeconfig();\n      const pageOffset = this.route.snapshot.queryParamMap.get('offset');\n      const index = this.route.snapshot.queryParamMap.get('index');\n      this.queryDetails.offset = pageOffset || 0;\n      this.queryDetails.index = index || 0;\n    }\n\n    beforeChange($event) {\n      if ($event.panelId === 'preventchange-2') {\n        $event.preventDefault();\n      }\n\n      if ($event.panelId === 'preventchange-3' && $event.nextState === false) {\n        $event.preventDefault();\n      }\n    }\n\n    ngOnInit() {\n      this.imageUrl = this.configService.getImageUrl();\n      this.postImageUrl = './assets/upload-banner/upload.png';\n      this.initForm();\n      this.categoryList();\n      this.getProductList();\n      this.editBannerId = this.route.snapshot.paramMap.get('id');\n\n      if (this.editBannerId) {\n        const params = {};\n        params.bannerId = this.editBannerId;\n        this.sandbox.getBannerDetails(params);\n        this.editBannerData();\n      }\n\n      const pageOffset = this.route.snapshot.queryParamMap.get('offset');\n      const index = this.route.snapshot.queryParamMap.get('index');\n      this.queryDetails.offset = pageOffset || 0;\n      this.queryDetails.index = index || 0;\n      this.bannerForm.controls['type'].valueChanges.subscribe(selectedValue => {\n        this.checkedval = selectedValue;\n      });\n    }\n\n    open2(content) {\n      this.modalService.open(content, {\n        windowClass: 'image-manager'\n      }).result.then(result => {\n        this.closeResult = `Closed with: ${result}`;\n      }, reason => {\n        this.closeResult = `Dismissed ${this.getDismissReason(reason)}`;\n      });\n    }\n\n    open(content) {\n      this.modalService2.open(content, {\n        windowClass: 'dark-modal,image-manager'\n      });\n    }\n\n    getDismissReason(reason) {\n      if (reason === ModalDismissReasons.ESC) {\n        return 'by pressing ESC';\n      } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n        return 'by clicking on a backdrop';\n      } else {\n        return `with: ${reason}`;\n      }\n    }\n\n    bannerCancel() {\n      this.service.setBannerListData('');\n      this.router.navigate(['/cms/banners/list'], {\n        queryParams: this.queryDetails\n      });\n    }\n\n    initForm() {\n      this.bannerForm = this.fb.group({\n        bannerTitle: [null, Validators.compose([Validators.required, Validators.maxLength(255)])],\n        bannerContent: [''],\n        active: [null, Validators.required],\n        bannerLink: [''],\n        position: [null],\n        type: [1],\n        imageInput: ['', Validators.required]\n      });\n    }\n    /**\n     * Handles form 'submit' event. Calls sandbox banner  function if form is valid.\n     *\n     * @param event form event\n     * @param form entire form value\n     */\n\n\n    onSubmit() {\n      this.submitted = true;\n\n      if (!this.bannerForm.valid) {\n        this.validateAllFormFields(this.bannerForm);\n        return;\n      } else {\n        const params = {};\n        params.title = this.bannerForm.value.bannerTitle || '';\n        params.content = this.bannerForm.value.bannerContent || '';\n        params.position = this.bannerForm.value.position || 0;\n        params.image = this.ImageUrl;\n        const tempActive = parseInt(this.bannerForm.value.active);\n        params.status = tempActive;\n\n        if (this.checkedval == 1) {\n          console.log('custom', this.checkedval);\n          params.link = this.bannerForm.value.bannerLink || '';\n          params.linkType = 1;\n        }\n\n        if (this.checkedval == 2) {\n          console.log('this.productslugvalue', this.productslugvalue);\n          params.link = this.productslugvalue || '';\n          params.linkType = 2;\n        }\n\n        if (this.checkedval == 3) {\n          params.link = this.categoryslugvalue || '';\n          params.linkType = 3;\n        }\n\n        params.linkType = params.link == '' ? '' : params.linkType;\n\n        if (this.editBannerId) {\n          params.bannerId = this.editBannerId;\n          this.sandbox.UpdateBanner(params);\n        } else {\n          this.sandbox.addBanner(params);\n        }\n      }\n\n      this.subscribe();\n    }\n\n    subscribe() {\n      this.subscriptions.push(this.sandbox.getAddNewBanner$.subscribe(data => {\n        if (data) {\n          if (data.message) {\n            this.router.navigate(['/cms/banners/list'], {\n              queryParams: this.queryDetails\n            });\n          }\n        }\n      }));\n      this.subscriptions.push(this.sandbox.getUpdatebanner$.subscribe(data => {\n        if (data) {\n          if (data.message) {\n            this.router.navigate(['/cms/banners/list'], {\n              queryParams: this.queryDetails\n            });\n          }\n        }\n      }));\n    }\n\n    editBannerData() {\n      this.subscriptions.push(this.sandbox.getBannerDetails$.subscribe(data => {\n        if (data && Object.keys(data).length) {\n          this.new = data;\n          this.setBanner(data);\n        }\n      }));\n    }\n\n    categoryList() {\n      const params = {};\n      params.limit = 0;\n      params.offset = 0;\n      params.count = 0;\n      params.keyword = '';\n      params.sortOrder = 0;\n      params.status = 1;\n      this.sandbox.categoryLists(params);\n    }\n\n    getProductList() {\n      const params = {};\n      params.offset = 0;\n      params.limit = 0;\n      params.keyword = '';\n      params.sku = '';\n      params.status = 1;\n      params.price = 0;\n      this.sandbox.ProductLists(params);\n    }\n\n    setBanner(details) {\n      this.reset();\n\n      if (details.image) {\n        this.bannerForm.controls['imageInput'].setValue(details.image); // <-- Set Value for Validation\n\n        this.postImageUrl = this.imageUrl + '?path=' + `${details.imagePath}` + '&name=' + `${details.image}` + '&width=160&height=150';\n      }\n\n      this.bannerForm.controls['bannerTitle'].setValue(details.title);\n      this.bannerForm.controls['bannerContent'].setValue(this.htmlTagConversion(details.content));\n      this.bannerForm.controls['active'].setValue(details.isActive);\n      this.bannerForm.controls['position'].setValue(details.position);\n\n      if (details.linkType == 1) {\n        // this.bannerForm.controls['bannerLink'].setValue(details.link);\n        this.bannerLink = details.link;\n        this.checkedval = 1;\n        this.customproduct = 1;\n      }\n\n      if (details.linkType == 2) {\n        this.productslugvalue = details.link;\n        this.checkedval = 2;\n        this.customproduct = 2;\n      }\n\n      if (details.linkType == 3) {\n        this.categoryslugvalue = details.link;\n        this.checkedval = 3;\n        this.customproduct = 3;\n      }\n\n      if (details.linkType == '') {\n        // this.bannerForm.controls['bannerLink'].setValue(details.link);\n        this.checkedval = 1;\n        this.customproduct = 1;\n      }\n    } // Upload Image\n\n\n    uploadButtonClick() {\n      const el = this.filePath.nativeElement;\n      el.click();\n    }\n\n    uploadChange($event) {\n      this.submitted = false;\n      this.convertBase64($event.target);\n      this.image = $event.target.files[0].name;\n    }\n\n    convertBase64(inputValue) {\n      this.imageTypeError = false;\n      this.imageSizeError = false;\n\n      if (inputValue.files && inputValue.files[0]) {\n        const allowed_types = ['image/png', 'image/jpeg', 'image/jpg'];\n\n        if (!_.includes(allowed_types, inputValue.files[0].type)) {\n          this.imageTypeError = true;\n          this.ImageUrl = '';\n          this.postImageUrl = './assets/upload-banner/upload.png';\n          this.filePath.nativeElement.value = '';\n          this.bannerForm.controls['imageInput'].setValue('');\n          return false;\n        }\n\n        const size = Math.round(inputValue.files[0].size / 1024);\n\n        if (size > 2048) {\n          this.imageSizeError = true;\n          this.ImageUrl = '';\n          this.postImageUrl = './assets/upload-banner/upload.png';\n          this.filePath.nativeElement.value = '';\n          this.bannerForm.controls['imageInput'].setValue('');\n          return;\n        }\n\n        this.imageTypeError = false;\n        this.imageSizeError = false;\n        const file = inputValue.files[0];\n        this.bannerForm.controls['imageInput'].setValue(file ? file.name : '');\n        const myReader = new FileReader();\n\n        myReader.onloadend = e => {\n          this.postImageUrl = myReader.result;\n          this.ImageUrl = myReader.result;\n          this.changeDetectRef.detectChanges();\n        };\n\n        myReader.readAsDataURL(file);\n      }\n    } //  validation controls  -  function (f) is using in banner add html\n\n\n    get f() {\n      return this.bannerForm.controls;\n    } // show all validation at when invalid form\n\n\n    validateAllFormFields(formGroup) {\n      Object.keys(formGroup.controls).forEach(field => {\n        const control = formGroup.get(field);\n\n        if (control instanceof FormControl) {\n          control.markAsTouched({\n            onlySelf: true\n          });\n        } else if (control instanceof FormGroup) {\n          this.validateAllFormFields(control);\n        }\n      });\n    }\n\n    htmlTagConversion(data) {\n      const val = data.replaceAll('&amp;', '&').replaceAll('&lt;', '<').replaceAll('&gt;', '>').replaceAll('&quot;', '\"').replaceAll('&#39;', \"'\").replaceAll('&sbquo;', '‚').replaceAll('&#61;', '=').replaceAll('&#45;', '-').replaceAll('&hellip;', '…').replaceAll('&commat;', '@').replaceAll('&copy;', '©').replaceAll('&#35;', '#').replaceAll('&ldquo;', '“').replaceAll('&rsquo;', '’').replaceAll('&lsquo;', '‘').replaceAll('&trade;', '™').replaceAll('&reg;', '®').replaceAll('&ndash;', '–').replaceAll('&eacute;', 'é').replaceAll('&euro;', '€').replaceAll('&pound;', '£');\n      return val;\n    }\n\n    productevent(e) {\n      this.customproduct = e;\n    }\n\n    productslug(e) {\n      this.productslugvalue = e;\n    }\n\n    categoryslug(e) {\n      this.categoryslugvalue = e;\n    }\n\n    reset() {\n      this.bannerLink = null;\n      this.categoryslugvalue = null;\n      this.productslugvalue = null;\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(each => each.unsubscribe());\n    }\n\n  }\n\n  BannerAddComponent.ɵfac = function BannerAddComponent_Factory(t) {\n    return new (t || BannerAddComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.ConfigService), i0.ɵɵdirectiveInject(i5.BannerSandbox), i0.ɵɵdirectiveInject(i6.BannerService), i0.ɵɵdirectiveInject(i7.CkeConfiqService));\n  };\n\n  BannerAddComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BannerAddComponent,\n    selectors: [[\"app-cms-banner-add\"]],\n    viewQuery: function BannerAddComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.filePath = _t.first);\n      }\n    },\n    decls: 98,\n    vars: 78,\n    consts: [[1, \"row\", \"products-section\", 2, \"margin\", \"unset\"], [1, \"col-12\"], [1, \"breadcrumbs-row\", \"noborder\"], [1, \"bc-col\"], [1, \"bc-col-btn\", \"ap-col-btn\"], [\"type\", \"submit\", 1, \"btn\", \"btn-save\", 3, \"click\"], [\"src\", \"assets/img/tick-round-white.png\", \"alt\", \"save\", 3, \"click\"], [1, \"btn\", \"btn-cancel\", 3, \"click\"], [\"src\", \"assets/img/close-white-ico.png\", \"alt\", \"close\"], [1, \"flex\", \"addproduct-wrap\", \"addgroup-wrap\"], [1, \"card\", \"ap-general\"], [3, \"formGroup\"], [1, \"ap-header\"], [1, \"flex\", \"ap-body\", \"cmsap-body\"], [1, \"ap-body-col\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"bannerTitle\", 1, \"form-control\", 3, \"ngModel\", \"placeholder\", \"ngClass\", \"ngModelChange\"], [\"class\", \"validation-error\", 4, \"ngIf\"], [1, \"ap-body-col\", \"width100\"], [\"formControlName\", \"bannerContent\", 3, \"config\", \"ngClass\"], [2, \"display\", \"flex\", \"width\", \"100%\"], [2, \"width\", \"50%\"], [1, \"ap-body-col\", 2, \"width\", \"100%\"], [\"aria-label\", \"Select an option\", \"formControlName\", \"type\", 3, \"change\"], [\"value\", \"1\", 3, \"checked\"], [\"value\", \"2\", 3, \"checked\"], [\"value\", \"3\", 3, \"checked\"], [\"class\", \"form-group\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"position\", 1, \"form-control\", 3, \"ngModel\", \"placeholder\", \"ngClass\", \"ngModelChange\"], [\"formControlName\", \"active\", \"id\", \"inlineFormCustomSelect\", 3, \"placeholder\", \"searchable\", \"ngClass\"], [3, \"value\"], [1, \"image-col\"], [1, \"img-dflt\"], [\"type\", \"file\", \"name\", \"userImg\", \"accept\", \"image/*\", 2, \"display\", \"none\", 3, \"change\"], [\"filePath\", \"\"], [\"type\", \"hidden\", \"name\", \"fileHidden\", \"formControlName\", \"imageInput\"], [\"width\", \"13%\", \"height\", \"13%\", 3, \"src\", \"alt\"], [\"type\", \"button\", 3, \"click\"], [2, \"font-size\", \"10px\"], [\"class\", \"validation-error\", \"style\", \"margin-top: -14px;\", 4, \"ngIf\"], [\"style\", \"margin-top: -14px;\", \"class\", \"upload-error validation-error\", 4, \"ngIf\"], [1, \"validation-error\"], [4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"error\"], [\"type\", \"text\", \"placeholder\", \"Custom text...\", \"formControlName\", \"bannerLink\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Select Product...\", 3, \"editableSearchTerm\", \"dropdownPosition\", \"ngModel\", \"ngModelOptions\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Select Category...\", 3, \"ngModel\", \"ngModelOptions\", \"editableSearchTerm\", \"dropdownPosition\", \"ngModelChange\", \"change\"], [1, \"validation-error\", 2, \"margin-top\", \"-14px\"], [1, \"upload-error\", \"validation-error\", 2, \"margin-top\", \"-14px\"]],\n    template: function BannerAddComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-banner-layout\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelement(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function BannerAddComponent_Template_button_click_6_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(7, \"img\", 6);\n        i0.ɵɵlistener(\"click\", function BannerAddComponent_Template_img_click_7_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8);\n        i0.ɵɵpipe(9, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function BannerAddComponent_Template_button_click_10_listener() {\n          return ctx.bannerCancel();\n        });\n        i0.ɵɵelement(11, \"img\", 8);\n        i0.ɵɵtext(12);\n        i0.ɵɵpipe(13, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 9);\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵelementStart(16, \"form\", 11);\n        i0.ɵɵelementStart(17, \"div\", 12);\n        i0.ɵɵtext(18);\n        i0.ɵɵpipe(19, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 13);\n        i0.ɵɵelementStart(21, \"div\", 14);\n        i0.ɵɵelementStart(22, \"div\", 15);\n        i0.ɵɵelementStart(23, \"label\");\n        i0.ɵɵtext(24);\n        i0.ɵɵpipe(25, \"translate\");\n        i0.ɵɵelementStart(26, \"sup\");\n        i0.ɵɵtext(27, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function BannerAddComponent_Template_input_ngModelChange_28_listener($event) {\n          return ctx.bannerTitle = $event;\n        });\n        i0.ɵɵpipe(29, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(30, BannerAddComponent_div_30_Template, 3, 2, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 18);\n        i0.ɵɵelementStart(32, \"div\", 15);\n        i0.ɵɵelementStart(33, \"label\");\n        i0.ɵɵtext(34);\n        i0.ɵɵpipe(35, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"ckeditor\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 20);\n        i0.ɵɵelementStart(38, \"div\", 21);\n        i0.ɵɵelementStart(39, \"div\", 22);\n        i0.ɵɵelementStart(40, \"div\", 15);\n        i0.ɵɵelementStart(41, \"label\");\n        i0.ɵɵtext(42);\n        i0.ɵɵpipe(43, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"mat-radio-group\", 23);\n        i0.ɵɵlistener(\"change\", function BannerAddComponent_Template_mat_radio_group_change_44_listener($event) {\n          return ctx.productevent($event.value);\n        });\n        i0.ɵɵelementStart(45, \"mat-radio-button\", 24);\n        i0.ɵɵtext(46, \"Custom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"mat-radio-button\", 25);\n        i0.ɵɵtext(48, \"Product\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"mat-radio-button\", 26);\n        i0.ɵɵtext(50, \"Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"div\", 22);\n        i0.ɵɵelementStart(52, \"div\");\n        i0.ɵɵtemplate(53, BannerAddComponent_div_53_Template, 5, 2, \"div\", 27);\n        i0.ɵɵtemplate(54, BannerAddComponent_div_54_Template, 6, 8, \"div\", 27);\n        i0.ɵɵtemplate(55, BannerAddComponent_div_55_Template, 6, 8, \"div\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"div\", 22);\n        i0.ɵɵelementStart(57, \"div\", 15);\n        i0.ɵɵelementStart(58, \"label\");\n        i0.ɵɵtext(59);\n        i0.ɵɵpipe(60, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"input\", 28);\n        i0.ɵɵlistener(\"ngModelChange\", function BannerAddComponent_Template_input_ngModelChange_61_listener($event) {\n          return ctx.position = $event;\n        });\n        i0.ɵɵpipe(62, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(63, BannerAddComponent_div_63_Template, 2, 1, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"div\", 22);\n        i0.ɵɵelementStart(65, \"div\", 15);\n        i0.ɵɵelementStart(66, \"label\");\n        i0.ɵɵtext(67);\n        i0.ɵɵpipe(68, \"translate\");\n        i0.ɵɵelementStart(69, \"sup\");\n        i0.ɵɵtext(70, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(71, \"ng-select\", 29);\n        i0.ɵɵpipe(72, \"translate\");\n        i0.ɵɵelementStart(73, \"ng-option\", 30);\n        i0.ɵɵtext(74);\n        i0.ɵɵpipe(75, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(76, \"ng-option\", 30);\n        i0.ɵɵtext(77);\n        i0.ɵɵpipe(78, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(79, BannerAddComponent_div_79_Template, 2, 1, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(80, \"div\", 14);\n        i0.ɵɵelementStart(81, \"div\", 15);\n        i0.ɵɵelementStart(82, \"div\", 31);\n        i0.ɵɵelementStart(83, \"div\", 32);\n        i0.ɵɵelementStart(84, \"input\", 33, 34);\n        i0.ɵɵlistener(\"change\", function BannerAddComponent_Template_input_change_84_listener($event) {\n          return ctx.uploadChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(86, \"input\", 35);\n        i0.ɵɵelement(87, \"img\", 36);\n        i0.ɵɵelement(88, \"p\");\n        i0.ɵɵelementStart(89, \"button\", 37);\n        i0.ɵɵlistener(\"click\", function BannerAddComponent_Template_button_click_89_listener() {\n          return ctx.uploadButtonClick();\n        });\n        i0.ɵɵtext(90);\n        i0.ɵɵpipe(91, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(92, \"p\", 38);\n        i0.ɵɵtext(93);\n        i0.ɵɵpipe(94, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(95, BannerAddComponent_div_95_Template, 2, 1, \"div\", 39);\n        i0.ɵɵtemplate(96, BannerAddComponent_div_96_Template, 3, 3, \"div\", 40);\n        i0.ɵɵtemplate(97, BannerAddComponent_div_97_Template, 3, 3, \"div\", 40);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(9, 40, \"CMS.Banners.Save\"), \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(13, 42, \"CMS.Banners.Cancel\"), \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.bannerForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(19, 44, \"CMS.Pages.GeneralInformation\"), \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 46, \"CMS.Banners.BannerTitle\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(29, 48, \"CMS.BannerPlaceholder.BannerTitle\"));\n        i0.ɵɵproperty(\"ngModel\", ctx.bannerTitle)(\"ngClass\", i0.ɵɵpureFunction1(70, _c2, ctx.submitted && ctx.f.bannerTitle.errors));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.bannerTitle.errors);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(35, 50, \"CMS.BannerPlaceholder.BannerContent\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"config\", ctx.config)(\"ngClass\", i0.ɵɵpureFunction1(72, _c3, ctx.bannerForm.get(\"bannerContent\").hasError(\"required\") && ctx.bannerForm.get(\"bannerContent\").touched && ctx.submitted == true));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(43, 52, \"CMS.BannerPlaceholder.Link\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"checked\", ctx.checkedval == 1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"checked\", ctx.checkedval == 2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"checked\", ctx.checkedval == 3);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.customproduct == 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.customproduct == 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.customproduct == 3);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(60, 54, \"CMS.BannerPlaceholder.Position\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(62, 56, \"CMS.BannerPlaceholder.EnterPosition\"));\n        i0.ɵɵproperty(\"ngModel\", ctx.position)(\"ngClass\", i0.ɵɵpureFunction1(74, _c2, ctx.submitted && ctx.f.position.errors));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.position.errors);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(68, 58, \"CMS.Pages.Active\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(72, 60, \"CMS.Pages.SelectActive\"));\n        i0.ɵɵproperty(\"searchable\", false)(\"ngClass\", i0.ɵɵpureFunction1(76, _c4, ctx.submitted && ctx.f.active.errors));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(75, 62, \"CMS.Pages.Yes\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(78, 64, \"CMS.Pages.No\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.active.errors);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"src\", ctx.postImageUrl, i0.ɵɵsanitizeUrl)(\"alt\", ctx.new.title ? ctx.new.title : ctx.image);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(91, 66, \"CMS.Banners.UploadPic\"), \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(94, 68, \"CMS.BannerError.UploadPicFilesAllowed\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.imageInput.errors);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.imageSizeError);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.imageTypeError);\n      }\n    },\n    directives: [i8.BannerLayoutComponent, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i9.NgClass, i9.NgIf, i10.CKEditorComponent, i11.MatRadioGroup, i11.MatRadioButton, i12.NgSelectComponent, i12.ɵr, i3.NgModel, i9.NgForOf],\n    pipes: [i13.TranslatePipe, i9.AsyncPipe],\n    styles: [\".dark-modal .modal-content{background-color:#009efb;color:#fff}.dark-modal .close{color:#fff}.light-blue-backdrop{background-color:#5cb3fd}.image-manager .modal-dialog{max-width:70%}.radio-buttons{display:flex;padding:37px 19px;justify-content:center}.mat-radio-button~.mat-radio-button{margin-left:43px}\\n\"],\n    encapsulation: 2\n  });\n  return BannerAddComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}