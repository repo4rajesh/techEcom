{"ast":null,"code":"import { DeleteConfirmationDialogComponent } from '../../../../../shared/model-popup/delete-confirmation-dialog/delete-confirmation-dialog.component';\nimport { ZoneAddComponent } from './../add/add.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../../../../../../core/admin/settings/localizations/zone/zone.sandbox\";\nimport * as i4 from \"../../../../../../../../core/admin/settings/localizations/zone/zone.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../../../shared/components/directives/hide-if-unauthorized.directive\";\nimport * as i8 from \"@angular/material/paginator\";\nimport * as i9 from \"@ngx-translate/core\";\n\nfunction ZoneListComponent_ng_template_11_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r1.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.pageSize);\n  }\n}\n\nfunction ZoneListComponent_ng_template_11_tr_40_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 1, \"Settings.Local.StockStatus.Active\"), \" \");\n  }\n}\n\nfunction ZoneListComponent_ng_template_11_tr_40_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 1, \"Settings.Local.StockStatus.InActive\"), \" \");\n  }\n}\n\nconst _c0 = function () {\n  return [\"edit-zone\", \"delete-zone\"];\n};\n\nfunction ZoneListComponent_ng_template_11_tr_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtemplate(8, ZoneListComponent_ng_template_11_tr_40_div_8_Template, 3, 3, \"div\", 27);\n    i0.ɵɵtemplate(9, ZoneListComponent_ng_template_11_tr_40_div_9_Template, 3, 3, \"div\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 28);\n    i0.ɵɵelementStart(11, \"div\", 29);\n    i0.ɵɵelement(12, \"i\", 30);\n    i0.ɵɵelementStart(13, \"div\", 31);\n    i0.ɵɵelementStart(14, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function ZoneListComponent_ng_template_11_tr_40_Template_a_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const zonelist_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.addeNewZone(zonelist_r3, \"edit\");\n    });\n    i0.ɵɵelement(15, \"img\", 33);\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function ZoneListComponent_ng_template_11_tr_40_Template_a_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const zonelist_r3 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.deleteZone(zonelist_r3.zoneId, ctx_r9.deletePop);\n    });\n    i0.ɵɵelement(19, \"img\", 34);\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const zonelist_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(zonelist_r3.country.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(zonelist_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(zonelist_r3.code);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", zonelist_r3.isActive === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", zonelist_r3.isActive === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"multipleHide\", i0.ɵɵpureFunction0(14, _c0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"edit-zone\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(17, 10, \"Settings.Local.Edit\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"delete-zone\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(21, 12, \"Settings.Local.Delete\"), \" \");\n  }\n}\n\nconst _c1 = function (a0) {\n  return [a0];\n};\n\nfunction ZoneListComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"div\", 9);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 10);\n    i0.ɵɵelementStart(7, \"select\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function ZoneListComponent_ng_template_11_Template_select_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.pageSize = $event;\n    })(\"change\", function ZoneListComponent_ng_template_11_Template_select_change_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.pageLength();\n    });\n    i0.ɵɵtemplate(8, ZoneListComponent_ng_template_11_option_8_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementStart(9, \"option\", 13);\n    i0.ɵɵtext(10, \"10\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 14);\n    i0.ɵɵtext(12, \"20\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 15);\n    i0.ɵɵtext(14, \"30\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ZoneListComponent_ng_template_11_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.addeNewZone(\"\", \"add\");\n    });\n    i0.ɵɵelement(16, \"img\", 17);\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 18);\n    i0.ɵɵelementStart(20, \"div\", 19);\n    i0.ɵɵelementStart(21, \"table\", 20);\n    i0.ɵɵelementStart(22, \"thead\");\n    i0.ɵɵelementStart(23, \"tr\");\n    i0.ɵɵelementStart(24, \"th\", 21);\n    i0.ɵɵtext(25);\n    i0.ɵɵpipe(26, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"th\", 21);\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\", 21);\n    i0.ɵɵtext(31);\n    i0.ɵɵpipe(32, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"th\", 21);\n    i0.ɵɵtext(34);\n    i0.ɵɵpipe(35, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"th\", 22);\n    i0.ɵɵtext(37);\n    i0.ɵɵpipe(38, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"tbody\");\n    i0.ɵɵtemplate(40, ZoneListComponent_ng_template_11_tr_40_Template, 22, 15, \"tr\", 23);\n    i0.ɵɵpipe(41, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"mat-paginator\", 24);\n    i0.ɵɵlistener(\"page\", function ZoneListComponent_ng_template_11_Template_mat_paginator_page_42_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onPageChange($event);\n    });\n    i0.ɵɵpipe(43, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 15, \"Settings.Local.Resultsperpage\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.pageSize !== \"10\" && ctx_r0.pageSize !== \"20\" && ctx_r0.pageSize !== \"30\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"create-zone\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 17, \"Settings.Local.Zone.AddNewZone\"));\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(26, 19, \"Settings.Local.Zone.Country\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 21, \"Settings.Local.Zone.ZoneName\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(32, 23, \"Settings.Local.Zone.ZoneCode\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(35, 25, \"Settings.Local.Emailtemplate.Status\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"multipleHide\", i0.ɵɵpureFunction0(33, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(38, 27, \"Settings.Local.Zone.Action\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(41, 29, ctx_r0.zoneSandbox.zoneList$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"length\", i0.ɵɵpipeBind1(43, 31, ctx_r0.zoneSandbox.zonePagination$))(\"pageSize\", ctx_r0.pageSize)(\"pageSizeOptions\", i0.ɵɵpureFunction1(34, _c1, ctx_r0.pageSize));\n  }\n}\n\nexport let ZoneListComponent = /*#__PURE__*/(() => {\n  class ZoneListComponent {\n    constructor(modal, router, zoneSandbox, service) {\n      this.modal = modal;\n      this.router = router;\n      this.zoneSandbox = zoneSandbox;\n      this.service = service;\n      this.type = 'edit';\n      this.pageSize = '5';\n      this.keyword = '';\n      this.regSubscribeEvents();\n    }\n\n    ngOnInit() {\n      this.pageSize = sessionStorage.getItem('itemsPerPage') ? sessionStorage.getItem('itemsPerPage') : this.pageSize;\n      this.isCount = true;\n      this.getZonesList(this.offset);\n      this.zoneSandbox.zoneAddLoaded$.subscribe(data => {\n        if (data === true) {\n          this.getZonesList(this.offset);\n        }\n      });\n      this.zoneSandbox.zoneUpdateLoaded$.subscribe(data => {\n        if (data === true) {\n          this.getZonesList(this.offset);\n        }\n      });\n    }\n\n    beforeChange($event) {\n      if ($event.panelId === 'preventchange-2') {\n        $event.preventDefault();\n      }\n\n      if ($event.panelId === 'preventchange-3' && $event.nextState === false) {\n        $event.preventDefault();\n      }\n    }\n    /**\n     * Handles  'getZonesList' event. Calls sandbox getZoneList  and getzonepagination function .\n     *\n     * @param offset from material paginator\n     * @param params storing pagination value\n     */\n\n\n    getZonesList(offset = 0) {\n      const params = {};\n      params.limit = this.pageSize;\n      params.offset = offset;\n      params.keyword = this.keyword;\n      params.status = '';\n      this.zoneSandbox.getZoneList(params);\n\n      if (this.isCount) {\n        params.count = true;\n        this.zoneSandbox.getZonePagination(params);\n      }\n    } // navigate to add component\n\n\n    addeNewZone(data, type) {\n      const modalRef = this.modal.open(ZoneAddComponent, {\n        windowClass: 'add-customers',\n        keyboard: false,\n        backdrop: 'static'\n      });\n\n      if (type === 'edit') {\n        this.service.setzonelistdata(data);\n        modalRef.componentInstance.edit = this.type;\n        modalRef.componentInstance.id = data.countryId;\n      } else {\n        this.service.setzonelistdata('');\n      }\n    } // calls service setzonelistdata with argument (list).And navigate to edit component.\n\n\n    editzone(list) {\n      this.service.setzonelistdata(list);\n      this.router.navigate(['/settings/local/zone/edit', list.zoneId]);\n    } // calls getZonesList with argument(offset)for pagination\n\n\n    onPageChange(event) {\n      this.currentPage = event.offset;\n      this.pageSize = event.pageSize;\n      this.index = event.pageIndex;\n      this.offset = event.pageSize * event.pageIndex;\n      this.getZonesList(this.offset);\n    }\n    /**  calls zoneSandbox zoneDelete with argument (zoneId)\n     * calls stopPropagation function\n     * */\n\n\n    deleteZone(zoneId) {\n      const modelRef = this.modal.open(DeleteConfirmationDialogComponent, {\n        size: 'sm',\n        windowClass: 'delete-confirm',\n        backdrop: 'static',\n        backdropClass: 'createcr'\n      });\n      modelRef.componentInstance.key = '';\n      modelRef.componentInstance.id = '';\n      modelRef.result.then(result => {\n        if (result === 'deleted') {\n          this.zoneSandbox.zoneDelete({\n            zoneId: zoneId\n          });\n          this.regSubscribeEvents();\n        }\n      });\n    }\n\n    pageLength() {\n      this.getZonesList();\n    }\n    /**  calls zoneSandbox  deleteZone$ if success reponse gotted then\n     * calls getZonesList function with argument(offset).\n     * */\n\n\n    regSubscribeEvents() {\n      this.zoneSandbox.deleteZone$.subscribe(_delete => {\n        if (_delete && _delete.status === 1) {\n          this.getZonesList(this.offset);\n        }\n      });\n    }\n\n  }\n\n  ZoneListComponent.ɵfac = function ZoneListComponent_Factory(t) {\n    return new (t || ZoneListComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ZoneSandbox), i0.ɵɵdirectiveInject(i4.ZoneService));\n  };\n\n  ZoneListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ZoneListComponent,\n    selectors: [[\"app-settings-zone-list\"]],\n    decls: 12,\n    vars: 0,\n    consts: [[1, \"set-lay-notes\", \"flex\", 2, \"padding\", \"0 10px 0 10px\"], [1, \"setup-wrapper\", \"set-loc-wrapper\"], [1, \"setup-container\", \"localization-container\"], [1, \"card\", \"ap-general\", \"ap-info\"], [1, \"flex\", \"ap-body\"], [2, \"width\", \"100%\"], [\"ngbTabContent\", \"\", \"style\", \"display: flex !important;\"], [1, \"localize-header\", \"flex\"], [1, \"loc-hdr-lft\"], [1, \"input-group\"], [1, \"select\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngIf\"], [\"value\", \"10\"], [\"value\", \"20\"], [\"value\", \"30\"], [1, \"set-ad-btn\", 3, \"appHideIfUnauthorized\", \"click\"], [\"src\", \"assets/img/add-white-ico.png\", \"alt\", \"add\"], [1, \"setup-right\"], [1, \"table-responsive\"], [1, \"table\", 2, \"background\", \"white !important\"], [\"scope\", \"col\"], [\"scope\", \"col\", 1, \"text-center\", 3, \"appHideIfUnauthorized\", \"multipleHide\"], [4, \"ngFor\", \"ngForOf\"], [3, \"length\", \"pageSize\", \"pageSizeOptions\", \"page\"], [3, \"value\"], [\"scope\", \"row\"], [4, \"ngIf\"], [1, \"text-center\", 3, \"appHideIfUnauthorized\", \"multipleHide\"], [\"ngbDropdown\", \"\", 1, \"dropdown\"], [\"ngbDropdownToggle\", \"\", 1, \"fa\", \"fa-ellipsis-v\", \"cursor\", 2, \"padding\", \"0 15px\"], [\"ngbDropdownMenu\", \"\", 1, \"dropdown-menu\"], [\"ngbDropdownItem\", \"\", \"href\", \"javascript:void(0)\", 1, \"dropdown-item\", 3, \"appHideIfUnauthorized\", \"click\"], [\"src\", \"assets/img/edit.png\", \"alt\", \"edit\"], [\"src\", \"assets/img/delete-new.png\", \"alt\", \"delete\"]],\n    template: function ZoneListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h4\");\n        i0.ɵɵtext(2, \"Note :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtext(4, \"In this section, the admin can maintain the master list of countries. They can choose any one zone from this list that will be available in the general settings for configuring the zone to which the eCommerce business belongs to. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 1);\n        i0.ɵɵelementStart(6, \"div\", 2);\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵelementStart(9, \"ngb-tabset\", 5);\n        i0.ɵɵelementStart(10, \"ngb-tab\");\n        i0.ɵɵtemplate(11, ZoneListComponent_ng_template_11_Template, 44, 36, \"ng-template\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n    },\n    directives: [i1.NgbTabset, i1.NgbTab, i1.NgbTabContent, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel, i6.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i7.MyHideIfUnauthorizedDirective, i6.NgForOf, i8.MatPaginator, i1.NgbDropdown, i1.NgbDropdownToggle, i1.NgbDropdownMenu, i1.NgbDropdownItem],\n    pipes: [i9.TranslatePipe, i6.AsyncPipe],\n    styles: [\".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}\"]\n  });\n  return ZoneListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}