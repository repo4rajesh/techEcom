{"ast":null,"code":"import { RoleAddComponent } from '../add/add.component';\nimport { DeleteConfirmationDialogComponent } from 'src/theme/default/admin/shared/model-popup/delete-confirmation-dialog/delete-confirmation-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../../../../../../core/admin/settings/role/role.sandbox\";\nimport * as i3 from \"../../../../../../../../../core/admin/settings/role/role.ApiClientService\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../../../../shared/components/directives/hide-if-unauthorized.directive\";\nimport * as i8 from \"@angular/material/paginator\";\nimport * as i9 from \"@ngx-translate/core\";\n\nfunction RoleListComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r0.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.pageSize);\n  }\n}\n\nfunction RoleListComponent_tr_44_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Settings.Role.Active\"));\n  }\n}\n\nfunction RoleListComponent_tr_44_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Settings.Role.InActive\"));\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"hide-permission\": a0\n  };\n};\n\nfunction RoleListComponent_tr_44_a_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 33);\n    i0.ɵɵlistener(\"click\", function RoleListComponent_tr_44_a_11_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const Rolelist_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.goToPermission(Rolelist_r2);\n    });\n    i0.ɵɵtext(1, \" Permission \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const Rolelist_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"edit-role-permission\")(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, (Rolelist_r2 == null ? null : Rolelist_r2.groupId) === 1));\n  }\n}\n\nconst _c1 = function () {\n  return [\"edit-role\", \"delete-role\", \"edit-role-permission\"];\n};\n\nfunction RoleListComponent_tr_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtemplate(5, RoleListComponent_tr_44_div_5_Template, 3, 3, \"div\", 25);\n    i0.ɵɵtemplate(6, RoleListComponent_tr_44_div_6_Template, 3, 3, \"div\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 26);\n    i0.ɵɵelementStart(8, \"div\", 27);\n    i0.ɵɵelement(9, \"i\", 28);\n    i0.ɵɵelementStart(10, \"div\", 29);\n    i0.ɵɵtemplate(11, RoleListComponent_tr_44_a_11_Template, 2, 4, \"a\", 30);\n    i0.ɵɵelementStart(12, \"a\", 31);\n    i0.ɵɵlistener(\"click\", function RoleListComponent_tr_44_Template_a_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const Rolelist_r2 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.addNewRole(Rolelist_r2, \"edit\");\n    });\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"a\", 32);\n    i0.ɵɵlistener(\"click\", function RoleListComponent_tr_44_Template_a_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const Rolelist_r2 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.deleteRole(Rolelist_r2.groupId);\n    });\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const Rolelist_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(Rolelist_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", Rolelist_r2.isActive === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", Rolelist_r2.isActive === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"multipleHide\", i0.ɵɵpureFunction0(13, _c1));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", (Rolelist_r2 == null ? null : Rolelist_r2.groupId) !== 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"edit-role\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(14, 9, \"Settings.Local.Edit\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"delete-role\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(17, 11, \"Settings.Local.Delete\"), \" \");\n  }\n}\n\nconst _c2 = function (a0) {\n  return [a0];\n};\n\nexport let RoleListComponent = /*#__PURE__*/(() => {\n  class RoleListComponent {\n    constructor(router, appSandbox, service, modalService) {\n      this.router = router;\n      this.appSandbox = appSandbox;\n      this.service = service;\n      this.modalService = modalService;\n      this.roledetails = {};\n      this.pageSize = '10';\n      this.keyword = '';\n      this.subscriptions = [];\n      this.type = 'edit';\n      this.regSubscribeEvents();\n    }\n\n    ngOnInit() {\n      this.pageSize = sessionStorage.getItem('itemsPerPage');\n      this.getRolelist(this.offset, this.pageSize);\n      this.getRoleListCount(this.offset, this.pageSize);\n      this.appSandbox.roleUpdateLoaded$.subscribe(data => {\n        if (data === true) {\n          this.getRolelist(this.offset, this.pageSize);\n          this.getRoleListCount(this.offset, this.pageSize);\n        }\n      });\n      this.appSandbox.roleAddLoaded$.subscribe(data => {\n        if (data === true) {\n          this.getRolelist(this.offset, this.pageSize);\n          this.getRoleListCount(this.offset, this.pageSize);\n        }\n      });\n    }\n\n    addNewRole(data, type) {\n      this.roledetails = null;\n      this.service.rolesetdata(this.roledetails);\n      const modalRef2 = this.modalService.open(RoleAddComponent, {\n        windowClass: 'roles',\n        backdrop: 'static',\n        centered: true\n      });\n\n      if (type === 'edit') {\n        this.roledetails = data;\n        this.service.rolesetdata(this.roledetails);\n        modalRef2.componentInstance.edit = this.type;\n        modalRef2.componentInstance.id = data;\n      }\n\n      modalRef2.result.then(result => {\n        if (result === 'close') {}\n      });\n    }\n    /**\n     * Handles form 'list' event. Calls sandbox Role getRolelist function .\n     *\n     * @param params storing entire value\n     */\n\n\n    getRolelist(offset = 0, pageSize) {\n      const params = {};\n      params.limit = pageSize;\n      params.offset = offset;\n      params.keyword = this.keyword;\n      this.appSandbox.getRoleList(params);\n    }\n    /**\n     * Handles form 'list' event. Calls sandbox Role getRolelistCount function .\n     *\n     * @param params storing entire value\n     */\n\n\n    getRoleListCount(offset = 0, pageSize) {\n      const params = {};\n      params.limit = pageSize;\n      params.offset = offset;\n      params.keyword = this.keyword;\n      params.count = true;\n      this.appSandbox.getpagination(params);\n    }\n\n    onPageChange(event) {\n      this.currentPage = event.offset;\n      this.pageSize = event.pageSize;\n      this.index = event.pageIndex;\n      const offset = event.pageSize * event.pageIndex;\n      this.getRolelist(offset, this.pageSize);\n    }\n\n    goToPermission(user) {\n      const userDetail = JSON.parse(sessionStorage.getItem('adminUserdetail')).userdetails;\n      const details = {\n        id: user.groupId,\n        type: 'role',\n        role: user.name\n      };\n      this.router.navigate(['/settings/access-and-permission/permission'], {\n        queryParams: {\n          user: JSON.stringify(details)\n        }\n      });\n    }\n    /**\n     * Handles form 'delete' event. Calls sandbox delete the perticular role.\n     *\n     */\n\n\n    deleteRole(Id) {\n      const modelRef = this.modalService.open(DeleteConfirmationDialogComponent, {\n        size: 'sm',\n        windowClass: 'delete-confirm',\n        backdrop: 'static',\n        backdropClass: 'createcr'\n      });\n      modelRef.componentInstance.key = '';\n      modelRef.componentInstance.id = '';\n      modelRef.result.then(result => {\n        if (result === 'deleted') {\n          const param = {};\n          param.groupId = Id;\n          this.appSandbox.deleteRole(param);\n          this.appSandbox.roleDelete$.subscribe(_delete => {\n            if (_delete) {\n              if (_delete['status'] === 1) {\n                this.getRolelist(0, this.pageSize);\n                this.getRoleListCount(0, this.pageSize);\n              }\n            }\n          });\n        }\n      });\n    } // delete event , subscripe status\n\n\n    regSubscribeEvents() {\n      this.subscriptions.push(this.appSandbox.roleDelete$.subscribe(_delete => {\n        if (_delete && _delete.status === 1) {\n          this.getRolelist(this.offset, this.pageSize);\n        }\n      }));\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(each => {\n        each.unsubscribe();\n      });\n    }\n\n  }\n\n  RoleListComponent.ɵfac = function RoleListComponent_Factory(t) {\n    return new (t || RoleListComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.RoleSandbox), i0.ɵɵdirectiveInject(i3.RoleApiClientService), i0.ɵɵdirectiveInject(i4.NgbModal));\n  };\n\n  RoleListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RoleListComponent,\n    selectors: [[\"app-settings-role-list\"]],\n    decls: 48,\n    vars: 32,\n    consts: [[1, \"set-lay-notes\", \"flex\", 2, \"padding\", \"0 10px 10px 10px\"], [1, \"setup-wrapper\", \"set-loc-wrapper\"], [1, \"setup-container\", \"localization-container\"], [1, \"card\", \"ap-general\", \"ap-info\"], [1, \"flex\", \"ap-body\"], [1, \"settings-right-wrapper\"], [1, \"localize-header\", \"flex\"], [1, \"loc-hdr-lft\"], [1, \"input-group\"], [1, \"select\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngIf\"], [\"value\", \"10\"], [\"value\", \"20\"], [\"value\", \"30\"], [1, \"set-ad-btn\", 3, \"appHideIfUnauthorized\", \"click\"], [\"src\", \"assets/img/add-white-ico.png\", \"alt\", \"add\"], [1, \"setup-right\"], [1, \"table-responsive\"], [1, \"table\"], [\"width\", \"50%\"], [\"width\", \"50px\", 1, \"text-center\", 3, \"appHideIfUnauthorized\", \"multipleHide\"], [4, \"ngFor\", \"ngForOf\"], [3, \"length\", \"pageSize\", \"pageSizeOptions\", \"page\"], [3, \"value\"], [4, \"ngIf\"], [1, \"text-center\", 3, \"appHideIfUnauthorized\", \"multipleHide\"], [\"ngbDropdown\", \"\", 1, \"dropdown\"], [\"ngbDropdownToggle\", \"\", 1, \"fa\", \"fa-ellipsis-v\", \"cursor\", 2, \"padding\", \"0 15px\"], [\"ngbDropdownMenu\", \"\", 1, \"dropdown-menu\", 2, \"min-width\", \"88px\"], [\"class\", \"dropdown-item\", \"ngbDropdownItem\", \"\", \"style\", \"cursor: pointer;\", 3, \"appHideIfUnauthorized\", \"ngClass\", \"click\", 4, \"ngIf\"], [\"ngbDropdownItem\", \"\", \"href\", \"javascript:void(0)\", 1, \"dropdown-item\", 3, \"appHideIfUnauthorized\", \"click\"], [1, \"dropdown-item\", 2, \"margin-left\", \"15px\", \"cursor\", \"pointer\", 3, \"appHideIfUnauthorized\", \"click\"], [\"ngbDropdownItem\", \"\", 1, \"dropdown-item\", 2, \"cursor\", \"pointer\", 3, \"appHideIfUnauthorized\", \"ngClass\", \"click\"]],\n    template: function RoleListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h4\");\n        i0.ɵɵtext(2, \"Note :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtext(4, \"The super admin can add different roles here and assign permissions to the roles. By defining the permissions, the super admin will be either giving the privilege to the role to access certain modules and at the same time will be restricting the user from accessing certain other modules. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 1);\n        i0.ɵɵelementStart(6, \"div\", 2);\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵelementStart(12, \"div\", 8);\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14);\n        i0.ɵɵpipe(15, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 9);\n        i0.ɵɵelementStart(17, \"select\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function RoleListComponent_Template_select_ngModelChange_17_listener($event) {\n          return ctx.pageSize = $event;\n        })(\"change\", function RoleListComponent_Template_select_change_17_listener() {\n          return ctx.getRolelist(0, ctx.pageSize);\n        });\n        i0.ɵɵtemplate(18, RoleListComponent_option_18_Template, 2, 2, \"option\", 11);\n        i0.ɵɵelementStart(19, \"option\", 12);\n        i0.ɵɵtext(20, \"10\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"option\", 13);\n        i0.ɵɵtext(22, \"20\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"option\", 14);\n        i0.ɵɵtext(24, \"30\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function RoleListComponent_Template_button_click_25_listener() {\n          return ctx.addNewRole(\"\", \"add\");\n        });\n        i0.ɵɵelement(26, \"img\", 16);\n        i0.ɵɵtext(27);\n        i0.ɵɵpipe(28, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 17);\n        i0.ɵɵelementStart(30, \"div\", 18);\n        i0.ɵɵelementStart(31, \"table\", 19);\n        i0.ɵɵelementStart(32, \"thead\");\n        i0.ɵɵelementStart(33, \"tr\");\n        i0.ɵɵelementStart(34, \"th\", 20);\n        i0.ɵɵtext(35);\n        i0.ɵɵpipe(36, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"th\");\n        i0.ɵɵtext(38);\n        i0.ɵɵpipe(39, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"th\", 21);\n        i0.ɵɵtext(41);\n        i0.ɵɵpipe(42, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"tbody\");\n        i0.ɵɵtemplate(44, RoleListComponent_tr_44_Template, 18, 14, \"tr\", 22);\n        i0.ɵɵpipe(45, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"mat-paginator\", 23);\n        i0.ɵɵlistener(\"page\", function RoleListComponent_Template_mat_paginator_page_46_listener($event) {\n          return ctx.onPageChange($event);\n        });\n        i0.ɵɵpipe(47, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(15, 13, \"Settings.Local.Resultsperpage\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.pageSize);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.pageSize !== \"10\" && ctx.pageSize !== \"20\" && ctx.pageSize !== \"30\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"appHideIfUnauthorized\", \"create-role\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(28, 15, \"Settings.Role.AddNewRole\"), \" \");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(36, 17, \"Settings.Role.Name\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(39, 19, \"Settings.Role.Status\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"multipleHide\", i0.ɵɵpureFunction0(27, _c1));\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(42, 21, \"Settings.Role.Action\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(45, 23, ctx.appSandbox.getRolesList$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"length\", i0.ɵɵpipeBind1(47, 25, ctx.appSandbox.roleCount$))(\"pageSize\", ctx.pageSize)(\"pageSizeOptions\", i0.ɵɵpureFunction1(30, _c2, i0.ɵɵpureFunction1(28, _c2, ctx.pageSize)));\n      }\n    },\n    directives: [i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel, i6.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i7.MyHideIfUnauthorizedDirective, i6.NgForOf, i8.MatPaginator, i4.NgbDropdown, i4.NgbDropdownToggle, i4.NgbDropdownMenu, i4.NgbDropdownItem, i6.NgClass],\n    pipes: [i9.TranslatePipe, i6.AsyncPipe],\n    styles: [\".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.setting1-inner-header[_ngcontent-%COMP%]{margin-top:40px!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}\"]\n  });\n  return RoleListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}