{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../../../../../core/admin/settings/permission/permission.sandbox\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction PermissionComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1, \"USER - \");\n    i0.ɵɵelementStart(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, ctx_r0.detail == null ? null : ctx_r0.detail.name));\n  }\n}\n\nfunction PermissionComponent_div_15_div_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function PermissionComponent_div_15_div_1_div_4_Template_input_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const sub_r5 = restoredCtx.$implicit;\n      return sub_r5.selected = $event;\n    })(\"change\", function PermissionComponent_div_15_div_1_div_4_Template_input_change_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(3);\n      return ctx_r8.statusChange();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sub_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", sub_r5.moduleId);\n    i0.ɵɵproperty(\"value\", sub_r5.moduleId)(\"ngModel\", sub_r5.selected)(\"checked\", sub_r5.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", sub_r5.moduleId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sub_r5 == null ? null : sub_r5.name, \" \");\n  }\n}\n\nfunction PermissionComponent_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵtemplate(4, PermissionComponent_div_15_div_1_div_4_Template, 4, 6, \"div\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const main_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(main_r3 == null ? null : main_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", main_r3 == null ? null : main_r3.permissionModule);\n  }\n}\n\nfunction PermissionComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtemplate(1, PermissionComponent_div_15_div_1_Template, 5, 2, \"div\", 11);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵelementStart(4, \"div\", 13);\n    i0.ɵɵelementStart(5, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function PermissionComponent_div_15_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.cancel();\n    });\n    i0.ɵɵtext(6, \" Cancel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function PermissionComponent_div_15_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.save();\n    });\n    i0.ɵɵtext(8, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 1, ctx_r1.sandbox.getPermissionsList$));\n  }\n}\n\nexport let PermissionComponent = /*#__PURE__*/(() => {\n  class PermissionComponent {\n    constructor(route, sandbox, changeDetect, router) {\n      this.route = route;\n      this.sandbox = sandbox;\n      this.changeDetect = changeDetect;\n      this.router = router;\n      this.subscriptions = [];\n      this.selectAllPermission = false;\n    }\n\n    ngOnInit() {\n      this.detail = JSON.parse(this.route.snapshot.queryParams.user);\n      this.type = this.detail.type;\n      this.id = this.detail.id;\n      this.getPermissionList();\n      this.subscribeList();\n    }\n\n    subscribeList() {\n      this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(data => {\n        if (data) {\n          this.permissionList = data;\n\n          if (this.id) {\n            this.getPermission();\n          }\n        }\n      }));\n    }\n\n    getStatus() {\n      let isValid = true;\n      this.permissionList.forEach(data => {\n        if (!isValid) {\n          return;\n        }\n\n        isValid = data.permissionModule.every(item => item.selected === true);\n      });\n      this.selectAllPermission = isValid;\n    }\n\n    getPermissionList() {\n      const params = {};\n      this.sandbox.getPermissionlist(params);\n    }\n\n    getPermission() {\n      const params = {};\n      params.refType = this.type === 'user' ? 2 : 1;\n      params.refId = this.id;\n      this.sandbox.getPermission(params);\n      this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(data => {\n        if (data) {\n          this.getStatus();\n        }\n      }));\n    }\n\n    save() {\n      const permissionArray = [];\n      this.permissionList.forEach(data => {\n        if (data.permissionModule) {\n          data.permissionModule.forEach(moduledata => {\n            if (moduledata.selected === true) {\n              permissionArray.push(moduledata.slugName);\n            }\n          });\n        }\n      });\n      const params = {};\n      params.refId = this.id;\n      params.refType = this.type === 'user' ? 2 : 1;\n      params.permission = JSON.stringify(permissionArray);\n      this.sandbox.addPermission(params);\n    }\n\n    selectAll(event) {\n      this.sandbox.selectAllPermission(event);\n    }\n\n    cancel() {\n      this.router.navigate(['/settings/access-and-permission']);\n    }\n\n    statusChange() {\n      this.getStatus();\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(each => each.unsubscribe());\n    }\n\n  }\n\n  PermissionComponent.ɵfac = function PermissionComponent_Factory(t) {\n    return new (t || PermissionComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PermissionSandbox), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.Router));\n  };\n\n  PermissionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PermissionComponent,\n    selectors: [[\"app-permission\"]],\n    decls: 18,\n    vars: 10,\n    consts: [[1, \"flex\", \"main-header\"], [1, \"form-group\"], [1, \"custom-control\", \"custom-checkbox\"], [\"type\", \"checkbox\", \"id\", \"checkbox22\", 1, \"custom-control-input\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"for\", \"checkbox22\", 1, \"custom-control-label\", \"cursor-pointer\"], [1, \"permission-wrap\"], [\"class\", \"user\", 4, \"ngIf\"], [1, \"user-role\"], [\"class\", \"pw-row\", 4, \"ngIf\"], [1, \"user\"], [1, \"pw-row\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-12\"], [1, \"flex\", \"srbtn\"], [1, \"cancel\", 3, \"click\"], [\"type\", \"submit\", 3, \"click\"], [1, \"form-group\", \"pw-row-full\", \"flex\"], [\"class\", \"custom-control custom-checkbox\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", 1, \"custom-control-input\", 3, \"value\", \"ngModel\", \"checked\", \"id\", \"ngModelChange\", \"change\"], [1, \"custom-control-label\", \"cursor-pointer\", 3, \"for\"]],\n    template: function PermissionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h3\");\n        i0.ɵɵtext(2, \"Permission Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function PermissionComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.selectAllPermission = $event;\n        })(\"change\", function PermissionComponent_Template_input_change_5_listener($event) {\n          return ctx.selectAll($event.target.checked);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"label\", 4);\n        i0.ɵɵtext(7, \" Select All \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5);\n        i0.ɵɵtemplate(9, PermissionComponent_span_9_Template, 5, 3, \"span\", 6);\n        i0.ɵɵelementStart(10, \"span\", 7);\n        i0.ɵɵtext(11, \"ROLE - \");\n        i0.ɵɵelementStart(12, \"b\");\n        i0.ɵɵtext(13);\n        i0.ɵɵpipe(14, \"uppercase\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, PermissionComponent_div_15_Template, 9, 3, \"div\", 8);\n        i0.ɵɵpipe(16, \"async\");\n        i0.ɵɵpipe(17, \"async\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectAllPermission);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.type === \"user\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 4, ctx.detail == null ? null : ctx.detail.role));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(16, 6, ctx.sandbox.permissionListLoaded$) && i0.ɵɵpipeBind1(17, 8, ctx.sandbox.permissionLoaded$));\n      }\n    },\n    directives: [i3.CheckboxControlValueAccessor, i3.NgControlStatus, i3.NgModel, i4.NgIf, i4.NgForOf],\n    pipes: [i4.UpperCasePipe, i4.AsyncPipe],\n    styles: [\".main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:-1rem!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:12px!important;height:12px!important;background-size:102% 60%!important;top:3px!important;left:-1rem!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 16px 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:10px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0 32px 12px 0}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;color:#393939;padding-left:20px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:12px!important;height:12px!important;background-size:102% 60%!important;top:3px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#239323!important}.main[_ngcontent-%COMP%]{display:block;background:white;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:\\\"\\\";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:\\\"\\\";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}\"]\n  });\n  return PermissionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}