{"ast":null,"code":"import { EmailTempAddComponent } from '../add/add.component';\nimport { DeleteConfirmationDialogComponent } from '../../../../../shared/model-popup/delete-confirmation-dialog/delete-confirmation-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../../../../../../core/admin/settings/localizations/emailtemplate/emailtemp.sandbox\";\nimport * as i4 from \"../../../../../../../../core/admin/settings/localizations/emailtemplate/emailtemp.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../../../shared/components/directives/hide-if-unauthorized.directive\";\nimport * as i8 from \"@angular/material/paginator\";\nimport * as i9 from \"@ngx-translate/core\";\n\nfunction EmailTempListComponent_ng_template_11_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r1.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.pageSize);\n  }\n}\n\nfunction EmailTempListComponent_ng_template_11_tr_36_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Settings.Local.Emailtemplate.Enabled\"), \" \");\n  }\n}\n\nfunction EmailTempListComponent_ng_template_11_tr_36_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Settings.Local.Emailtemplate.Disabled\"), \" \");\n  }\n}\n\nconst _c0 = function () {\n  return [\"edit-email-template\", \"delete-email-template\"];\n};\n\nfunction EmailTempListComponent_ng_template_11_tr_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"td\", 27);\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtemplate(7, EmailTempListComponent_ng_template_11_tr_36_div_7_Template, 3, 3, \"div\", 28);\n    i0.ɵɵtemplate(8, EmailTempListComponent_ng_template_11_tr_36_div_8_Template, 3, 3, \"div\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 29);\n    i0.ɵɵelementStart(10, \"div\", 30);\n    i0.ɵɵelement(11, \"i\", 31);\n    i0.ɵɵelementStart(12, \"div\", 32);\n    i0.ɵɵelementStart(13, \"a\", 33);\n    i0.ɵɵlistener(\"click\", function EmailTempListComponent_ng_template_11_tr_36_Template_a_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const emailtemp_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.editEmailtemp(emailtemp_r3);\n    });\n    i0.ɵɵelement(14, \"img\", 34);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"a\", 33);\n    i0.ɵɵlistener(\"click\", function EmailTempListComponent_ng_template_11_tr_36_Template_a_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const emailtemp_r3 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.deleteEmailtemp(emailtemp_r3.emailTemplateId);\n    });\n    i0.ɵɵelement(18, \"img\", 35);\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const emailtemp_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emailtemp_r3.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emailtemp_r3.subject);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHtml\", emailtemp_r3.content, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", emailtemp_r3.isActive == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", emailtemp_r3.isActive == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"multipleHide\", i0.ɵɵpureFunction0(14, _c0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"edit-email-template\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(16, 10, \"Settings.Local.Edit\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"appHideIfUnauthorized\", \"delete-email-template\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(20, 12, \"Settings.Local.Delete\"), \" \");\n  }\n}\n\nfunction EmailTempListComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelementStart(1, \"div\", 8);\n    i0.ɵɵelementStart(2, \"div\", 9);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 10);\n    i0.ɵɵelementStart(7, \"select\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function EmailTempListComponent_ng_template_11_Template_select_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.pageSize = $event;\n    })(\"change\", function EmailTempListComponent_ng_template_11_Template_select_change_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.getemailtempList();\n    });\n    i0.ɵɵtemplate(8, EmailTempListComponent_ng_template_11_option_8_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementStart(9, \"option\", 13);\n    i0.ɵɵtext(10, \"10\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 14);\n    i0.ɵɵtext(12, \"20\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 15);\n    i0.ɵɵtext(14, \"30\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 16);\n    i0.ɵɵelementStart(16, \"div\", 17);\n    i0.ɵɵelementStart(17, \"table\", 18);\n    i0.ɵɵelementStart(18, \"thead\");\n    i0.ɵɵelementStart(19, \"tr\");\n    i0.ɵɵelementStart(20, \"th\", 19);\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"th\", 20);\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\", 21);\n    i0.ɵɵtext(27);\n    i0.ɵɵpipe(28, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"th\", 20);\n    i0.ɵɵtext(30);\n    i0.ɵɵpipe(31, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\", 22);\n    i0.ɵɵtext(33);\n    i0.ɵɵpipe(34, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"tbody\");\n    i0.ɵɵtemplate(36, EmailTempListComponent_ng_template_11_tr_36_Template, 21, 15, \"tr\", 23);\n    i0.ɵɵpipe(37, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"mat-paginator\", 24);\n    i0.ɵɵlistener(\"page\", function EmailTempListComponent_ng_template_11_Template_mat_paginator_page_38_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onPageChange($event);\n    });\n    i0.ɵɵpipe(39, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 12, \"Settings.Local.Resultsperpage\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.pageSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.pageSize !== \"10\" && ctx_r0.pageSize !== \"20\" && ctx_r0.pageSize !== \"30\");\n    i0.ɵɵadvance(13);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(22, 14, \"Settings.Local.Emailtemplate.Title\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(25, 16, \"Settings.Local.Emailtemplate.Subject\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(28, 18, \"Settings.Local.Emailtemplate.Content\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(31, 20, \"Settings.Local.Emailtemplate.Status\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"multipleHide\", i0.ɵɵpureFunction0(28, _c0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(34, 22, \"Settings.Local.Emailtemplate.Action\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(37, 24, ctx_r0.sandbox.emailTempList$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"length\", i0.ɵɵpipeBind1(39, 26, ctx_r0.sandbox.emailTempPagination$))(\"pageSize\", ctx_r0.pageSize);\n  }\n}\n\nexport let EmailTempListComponent = /*#__PURE__*/(() => {\n  class EmailTempListComponent {\n    constructor(modal, router, sandbox, service) {\n      this.modal = modal;\n      this.router = router;\n      this.sandbox = sandbox;\n      this.service = service;\n      this.pageSize = 10;\n      this.index = 0;\n      this.keyword = '';\n      this.paginationCount = true;\n      this.regSubscribeEvents();\n    }\n\n    ngOnInit() {\n      this.pageSize = sessionStorage.getItem('itemsPerPage') ? sessionStorage.getItem('itemsPerPage') : this.pageSize;\n      this.getemailtempList(this.offset, this.pageSize);\n      this.sandbox.emailTempUpdateLoaded$.subscribe(data => {\n        if (data) {\n          this.getemailtempList(this.offset, this.pageSize);\n        }\n      });\n    }\n\n    beforeChange($event) {\n      if ($event.panelId === 'preventchange-2') {\n        $event.preventDefault();\n      }\n\n      if ($event.panelId === 'preventchange-3' && $event.nextState === false) {\n        $event.preventDefault();\n      }\n    }\n    /**\n     * Handles form 'list' event. Calls sandbox EmailTemp list function .\n     *\n     * @param params storing entire value\n     */\n\n\n    getemailtempList(offset = 0, pageSize) {\n      const params = {};\n      params.limit = pageSize;\n      params.offset = offset;\n      params.keyword = this.keyword;\n      this.sandbox.getEmailTemplateList(params);\n\n      if (this.paginationCount) {\n        params.count = 'true';\n        this.sandbox.emailTemplatePagination(params);\n      }\n    } // Add Email Temp navigate to Add Form\n\n\n    addNewEmailTemp() {\n      this.service.setemailtemplistdata('');\n      this.router.navigate(['/settings/local/emailtemp/add']);\n    } // Edit EmailTemp navigate to Add Form\n\n\n    editEmailtemp(list) {\n      const modalRef = this.modal.open(EmailTempAddComponent, {\n        windowClass: 'varient',\n        keyboard: false,\n        backdrop: 'static'\n      });\n\n      if (list) {\n        this.service.setemailtemplistdata(list);\n        modalRef.componentInstance.id = list.emailTemplateId;\n      }\n    }\n\n    deleteEmailtemp(emailTemplateId) {\n      const modelRef = this.modal.open(DeleteConfirmationDialogComponent, {\n        size: 'sm',\n        windowClass: 'delete-confirm',\n        backdrop: 'static',\n        backdropClass: 'createcr'\n      });\n      modelRef.componentInstance.key = '';\n      modelRef.componentInstance.id = '';\n      modelRef.result.then(result => {\n        if (result === 'deleted') {\n          this.sandbox.emailTemplateDelete({\n            emailTemplateId: emailTemplateId\n          });\n          this.regSubscribeEvents();\n        }\n      });\n    } // Delete After subscribe the Result\n\n\n    regSubscribeEvents() {\n      this.sandbox.emailTempDelete$.subscribe(_delete => {\n        if (_delete && _delete.status === 1) {\n          this.getemailtempList(this.offset, this.pageSize);\n        }\n      });\n    } // Pagination Count\n\n\n    onPageChange(event) {\n      this.pageSize = event.pageSize;\n      this.index = event.pageIndex;\n      this.offset = event.pageSize * event.pageIndex;\n      this.getemailtempList(this.offset, this.pageSize);\n    }\n\n  }\n\n  EmailTempListComponent.ɵfac = function EmailTempListComponent_Factory(t) {\n    return new (t || EmailTempListComponent)(i0.ɵɵdirectiveInject(i1.NgbModal), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.EmailTempSandbox), i0.ɵɵdirectiveInject(i4.EmailTempService));\n  };\n\n  EmailTempListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmailTempListComponent,\n    selectors: [[\"app-spurt-listemailtemp\"]],\n    decls: 12,\n    vars: 0,\n    consts: [[1, \"set-lay-notes\", \"flex\", 2, \"padding\", \"0 10px 10px 10px\"], [1, \"setup-wrapper\", \"set-loc-wrapper\"], [1, \"setup-container\", \"localization-container\"], [1, \"card\", \"ap-general\", \"ap-info\"], [1, \"flex\", \"ap-body\"], [2, \"width\", \"100%\"], [\"ngbTabContent\", \"\", \"style\", \"display: flex !important;\"], [1, \"localize-header\", \"flex\"], [1, \"loc-hdr-lft\"], [1, \"input-group\"], [1, \"select\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngIf\"], [\"value\", \"10\"], [\"value\", \"20\"], [\"value\", \"30\"], [1, \"setup-right\"], [1, \"table-responsive\"], [1, \"table\"], [\"scope\", \"col\", 1, \"\"], [\"scope\", \"col\"], [\"scope\", \"col\", 2, \"width\", \"466px\"], [\"scope\", \"col\", 1, \"text-center\", 3, \"appHideIfUnauthorized\", \"multipleHide\"], [4, \"ngFor\", \"ngForOf\"], [3, \"length\", \"pageSize\", \"page\"], [3, \"value\"], [\"scope\", \"row\", 1, \"\"], [2, \"width\", \"466px\", 3, \"innerHtml\"], [4, \"ngIf\"], [1, \"text-center\", 3, \"appHideIfUnauthorized\", \"multipleHide\"], [\"ngbDropdown\", \"\", 1, \"dropdown\"], [\"ngbDropdownToggle\", \"\", 1, \"fa\", \"fa-ellipsis-v\", \"cursor\", 2, \"padding\", \"0 15px\"], [\"ngbDropdownMenu\", \"\", 1, \"dropdown-menu\"], [\"ngbDropdownItem\", \"\", \"href\", \"javascript:void(0)\", 1, \"dropdown-item\", 3, \"appHideIfUnauthorized\", \"click\"], [\"src\", \"assets/img/edit.png\", \"alt\", \"edit\"], [\"src\", \"assets/img/delete-new.png\", \"alt\", \"delete\"]],\n    template: function EmailTempListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h4\");\n        i0.ɵɵtext(2, \"Note :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtext(4, \"In this section, the can manage and maintain the subject and content of the email templates that will be used for sending notifications to Vendor, Customers and Admin themselves, in different instances. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 1);\n        i0.ɵɵelementStart(6, \"div\", 2);\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵelementStart(9, \"ngb-tabset\", 5);\n        i0.ɵɵelementStart(10, \"ngb-tab\");\n        i0.ɵɵtemplate(11, EmailTempListComponent_ng_template_11_Template, 40, 29, \"ng-template\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n    },\n    directives: [i1.NgbTabset, i1.NgbTab, i1.NgbTabContent, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgModel, i6.NgIf, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i7.MyHideIfUnauthorizedDirective, i6.NgForOf, i8.MatPaginator, i1.NgbDropdown, i1.NgbDropdownToggle, i1.NgbDropdownMenu, i1.NgbDropdownItem],\n    pipes: [i9.TranslatePipe, i6.AsyncPipe],\n    styles: [\".settings-right-wrapper[_ngcontent-%COMP%]{margin-top:0!important}.coc[_ngcontent-%COMP%]{background:#f20a6d;border:solid thin #dddddd;color:#fff;padding:4px 16px}\"]\n  });\n  return EmailTempListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}