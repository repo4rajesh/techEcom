"use strict";(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[283],{1666:function(e,t,n){n.r(t),n.d(t,{AccessPermissionModule:function(){return _}});var o=n(38583),i=n(70853),r=n(8300),s=n(37716),a=n(72782);const c=function(){return["/settings/access-and-permission/role/list"]};function l(e,t){1&e&&(s.\u0275\u0275elementStart(0,"button",8),s.\u0275\u0275text(1,"Roles"),s.\u0275\u0275elementEnd()),2&e&&s.\u0275\u0275property("appHideIfUnauthorized","settings-role")("routerLink",s.\u0275\u0275pureFunction0(2,c))}function p(e,t){}const d=function(){return["/settings/access-and-permission/user/list"]};function m(e,t){1&e&&(s.\u0275\u0275elementStart(0,"button",8),s.\u0275\u0275text(1,"Users"),s.\u0275\u0275elementEnd()),2&e&&s.\u0275\u0275property("appHideIfUnauthorized","settings-user")("routerLink",s.\u0275\u0275pureFunction0(2,d))}function g(e,t){}let u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-access-layout"]],decls:17,vars:0,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"localize-tab"],["ngbTabTitle","Audit Log"],["ngbTabContent",""],["ngbTabTitle","Data Back-up"],["routerLinkActive","'active'","routerLinkActive","active",1,"tablinks",3,"appHideIfUnauthorized","routerLink"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"div",1),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275elementStart(3,"h3"),s.\u0275\u0275text(4,"Access and permission"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"p"),s.\u0275\u0275text(6,"In this section the admin can create and maintain different admin roles and permissions. Then, permissions can be assigned for the roles there of. Based on the permission assigned, different roles can access modules for which they have permission. Then, the admin can create users and assign the user to a role and the user will have only those permissions that will be assigned to that role."),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",3),s.\u0275\u0275elementStart(8,"div",4),s.\u0275\u0275elementStart(9,"ngb-tabset"),s.\u0275\u0275elementStart(10,"ngb-tab"),s.\u0275\u0275template(11,l,2,3,"ng-template",5),s.\u0275\u0275template(12,p,0,0,"ng-template",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"ngb-tab"),s.\u0275\u0275template(14,m,2,3,"ng-template",7),s.\u0275\u0275template(15,g,0,0,"ng-template",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(16,"router-outlet"))},directives:[a.T3,a.N_,a.o,a.EU,i.lC,i.Od,i.rH],styles:[".setup-wrapper[_ngcontent-%COMP%]{padding:16px;margin-bottom:0!important}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}.back-buttons[_ngcontent-%COMP%]{background:#f20a6d!important;border:solid thin #dddddd!important;color:#fff!important;padding:4px 16px!important;float:right!important;margin-top:-45px;margin-right:10px}"]}),e})();var h=n(76388),f=n(3679);function x(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"span",9),s.\u0275\u0275text(1,"USER - "),s.\u0275\u0275elementStart(2,"b"),s.\u0275\u0275text(3),s.\u0275\u0275pipe(4,"uppercase"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(4,1,null==e.detail?null:e.detail.name))}}function b(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",2),s.\u0275\u0275elementStart(1,"input",18),s.\u0275\u0275listener("ngModelChange",function(t){return s.\u0275\u0275restoreView(e).$implicit.selected=t})("change",function(){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext(3).statusChange()}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"label",19),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;s.\u0275\u0275advance(1),s.\u0275\u0275propertyInterpolate("id",e.moduleId),s.\u0275\u0275property("value",e.moduleId)("ngModel",e.selected)("checked",e.selected),s.\u0275\u0275advance(1),s.\u0275\u0275propertyInterpolate("for",e.moduleId),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",null==e?null:e.name," ")}}function C(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275elementStart(1,"h3"),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",16),s.\u0275\u0275template(4,b,4,6,"div",17),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(null==e?null:e.name),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngForOf",null==e?null:e.permissionModule)}}function M(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",10),s.\u0275\u0275template(1,C,5,2,"div",11),s.\u0275\u0275pipe(2,"async"),s.\u0275\u0275elementStart(3,"div",12),s.\u0275\u0275elementStart(4,"div",13),s.\u0275\u0275elementStart(5,"button",14),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().cancel()}),s.\u0275\u0275text(6," Cancel "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"button",15),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().save()}),s.\u0275\u0275text(8,"Save"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",s.\u0275\u0275pipeBind1(2,1,e.sandbox.getPermissionsList$))}}const P=[{path:"",redirectTo:"role",pathMatch:"full"},{path:"",component:u,children:[{path:"",redirectTo:"role",pathMatch:"full"},{path:"role",loadChildren:()=>Promise.all([n.e(592),n.e(150)]).then(n.bind(n,4150)).then(e=>e.RoleModule),canActivate:[r.a],data:{permission:"list-role"}},{path:"user",loadChildren:()=>n.e(619).then(n.bind(n,20619)).then(e=>e.UserModule),canActivate:[r.a],data:{permission:"list-user"}},{path:"permission",component:(()=>{class e{constructor(e,t,n,o){this.route=e,this.sandbox=t,this.changeDetect=n,this.router=o,this.subscriptions=[],this.selectAllPermission=!1}ngOnInit(){this.detail=JSON.parse(this.route.snapshot.queryParams.user),this.type=this.detail.type,this.id=this.detail.id,this.getPermissionList(),this.subscribeList()}subscribeList(){this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(e=>{e&&(this.permissionList=e,this.id&&this.getPermission())}))}getStatus(){let e=!0;this.permissionList.forEach(t=>{!e||(e=t.permissionModule.every(e=>!0===e.selected))}),this.selectAllPermission=e}getPermissionList(){this.sandbox.getPermissionlist({})}getPermission(){const e={};e.refType="user"===this.type?2:1,e.refId=this.id,this.sandbox.getPermission(e),this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(e=>{e&&this.getStatus()}))}save(){const e=[];this.permissionList.forEach(t=>{t.permissionModule&&t.permissionModule.forEach(t=>{!0===t.selected&&e.push(t.slugName)})});const t={};t.refId=this.id,t.refType="user"===this.type?2:1,t.permission=JSON.stringify(e),this.sandbox.addPermission(t)}selectAll(e){this.sandbox.selectAllPermission(e)}cancel(){this.router.navigate(["/settings/access-and-permission"])}statusChange(){this.getStatus()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(i.gz),s.\u0275\u0275directiveInject(h.O),s.\u0275\u0275directiveInject(s.ChangeDetectorRef),s.\u0275\u0275directiveInject(i.F0))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-permission"]],decls:18,vars:10,consts:[[1,"flex","main-header"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox22",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","checkbox22",1,"custom-control-label","cursor-pointer"],[1,"permission-wrap"],["class","user",4,"ngIf"],[1,"user-role"],["class","pw-row",4,"ngIf"],[1,"user"],[1,"pw-row"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"flex","srbtn"],[1,"cancel",3,"click"],["type","submit",3,"click"],[1,"form-group","pw-row-full","flex"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"value","ngModel","checked","id","ngModelChange","change"],[1,"custom-control-label","cursor-pointer",3,"for"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"h3"),s.\u0275\u0275text(2,"Permission Status"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",1),s.\u0275\u0275elementStart(4,"div",2),s.\u0275\u0275elementStart(5,"input",3),s.\u0275\u0275listener("ngModelChange",function(e){return t.selectAllPermission=e})("change",function(e){return t.selectAll(e.target.checked)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"label",4),s.\u0275\u0275text(7," Select All "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"div",5),s.\u0275\u0275template(9,x,5,3,"span",6),s.\u0275\u0275elementStart(10,"span",7),s.\u0275\u0275text(11,"ROLE - "),s.\u0275\u0275elementStart(12,"b"),s.\u0275\u0275text(13),s.\u0275\u0275pipe(14,"uppercase"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(15,M,9,3,"div",8),s.\u0275\u0275pipe(16,"async"),s.\u0275\u0275pipe(17,"async"),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(5),s.\u0275\u0275property("ngModel",t.selectAllPermission),s.\u0275\u0275advance(4),s.\u0275\u0275property("ngIf","user"===t.type),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(14,4,null==t.detail?null:t.detail.role)),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",s.\u0275\u0275pipeBind1(16,6,t.sandbox.permissionListLoaded$)&&s.\u0275\u0275pipeBind1(17,8,t.sandbox.permissionLoaded$)))},directives:[f.CheckboxControlValueAccessor,f.NgControlStatus,f.NgModel,o.NgIf,o.NgForOf],pipes:[o.UpperCasePipe,o.AsyncPipe],styles:['.main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:-1rem!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:12px!important;height:12px!important;background-size:102% 60%!important;top:3px!important;left:-1rem!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 16px 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:10px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0 32px 12px 0}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;color:#393939;padding-left:20px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:12px!important;height:12px!important;background-size:102% 60%!important;top:3px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#239323!important}.main[_ngcontent-%COMP%]{display:block;background:white;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}']}),e})(),canActivate:[r.a],data:{permission:"edit-role-permission"}}]}];let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[i.Bz.forChild(P)],i.Bz]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[o.CommonModule,O,a.IJ]]}),e})()}}]);