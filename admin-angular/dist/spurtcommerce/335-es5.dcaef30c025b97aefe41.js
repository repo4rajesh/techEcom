!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(r=o.key,i=void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"))?i:String(i)),o)}var r,i}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[335],{25335:function(e,o,r){r.r(o),r.d(o,{AuthenticationModule:function(){return G}});var i=r(38583),a=r(72782),l=r(70853),s=r(3679),d=r(37716),c=r(6754),p=r(33821),u=r(29790);function f(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",11),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,1,"Profile.Login.Error.Usernamerequired")," "))}function m(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",11),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,1,"Profile.Login.Error.Incorrectemail")," "))}function g(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",11),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,1,"Profile.Login.Error.Passwordrequired")," "))}function h(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",11),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,1,"Profile.Login.Error.UsernameorPasswordisincorrect")," "))}var v=function(t){return{validationcolor:t}},b=function(){return["/auth/forgot-password"]};function w(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",9),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,1,"Profile.Login.Error.Emailrequired")," "))}function y(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",9),d.\u0275\u0275text(1),d.\u0275\u0275pipe(2,"translate"),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(2,1,"Profile.Login.Error.Incorrectemail")," "))}var F,P=function(t){return{validationcolor:t}},S=function(){return["/auth/login"]},x=[{path:"login",component:(F=function(){function e(n,o,r){t(this,e),this.fb=n,this.authSandbox=o,this.layoutSandbox=r,this.emailPattern="[a-zA-Z0-9.-_-._]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",this.ifSubmitted=!1,this.badResponse=!1,this.subscriptions=[]}return n(e,[{key:"ngOnInit",value:function(){this.loginForm=this.fb.group({userName:["",[s.Validators.required,s.Validators.pattern(this.emailPattern)]],password:["",s.Validators.required]})}},{key:"validateAllFormFields",value:function(t){var e=this;Object.keys(t.controls).forEach(function(n){var o=t.get(n);o instanceof s.FormControl?o.markAsTouched({onlySelf:!0}):o instanceof s.FormGroup&&e.validateAllFormFields(o)})}},{key:"onSubmit",value:function(t){var e=this;if(this.ifSubmitted=!0,this.loginForm.valid){var n={};n.userName=this.loginForm.value.userName,n.password=this.loginForm.value.password,this.authSandbox.authLogin(n),this.subscriptions.push(this.authSandbox.loginLoaded$.subscribe(function(t){if(!0===t){var n=JSON.parse(sessionStorage.getItem("adminUser"));e.layoutSandbox.getUserDetail(n)}else e.loginForm.reset()}))}else this.validateAllFormFields(this.loginForm)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){return t.unsubscribe()})}}]),e}(),F.\u0275fac=function(t){return new(t||F)(d.\u0275\u0275directiveInject(s.FormBuilder),d.\u0275\u0275directiveInject(c.j),d.\u0275\u0275directiveInject(p.b))},F.\u0275cmp=d.\u0275\u0275defineComponent({type:F,selectors:[["app-spurt-login"]],decls:20,vars:22,consts:[[1,"card-align"],[1,"cards"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"admin"],[1,"log-group","first"],["type","text","placeholder","User Name","formControlName","userName",1,"form-control","placeholder-fix",3,"ngClass"],["class","validation-error",4,"ngIf"],[1,"log-group"],["type","password","placeholder","Password","formControlName","password",1,"form-control","placeholder-fix",3,"ngClass"],[1,"btn","btn-log"],[1,"forgot",3,"routerLink"],[1,"validation-error"]],template:function(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"form",2),d.\u0275\u0275listener("ngSubmit",function(){return e.onSubmit(e.loginForm.value)}),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"div",4),d.\u0275\u0275element(7,"input",5),d.\u0275\u0275template(8,f,3,3,"div",6),d.\u0275\u0275template(9,m,3,3,"div",6),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",7),d.\u0275\u0275element(11,"input",8),d.\u0275\u0275template(12,g,3,3,"div",6),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(13,h,3,3,"div",6),d.\u0275\u0275elementStart(14,"button",9),d.\u0275\u0275text(15),d.\u0275\u0275pipe(16,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"div",10),d.\u0275\u0275text(18),d.\u0275\u0275pipe(19,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(2),d.\u0275\u0275property("formGroup",e.loginForm),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(5,11,"Profile.Login.AdminLogin")),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(17,v,e.loginForm.get("userName").hasError("required")&&e.loginForm.get("userName").touched&&1==e.ifSubmitted||1==e.badResponse)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",e.loginForm.get("userName").hasError("required")&&e.loginForm.get("userName").touched&&1==e.ifSubmitted),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",e.loginForm.get("userName").hasError("pattern")&&e.loginForm.get("userName").touched&&1==e.ifSubmitted),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(19,v,e.loginForm.get("password").hasError("required")&&e.loginForm.get("password").touched&&1==e.ifSubmitted||1==e.badResponse)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",e.loginForm.get("password").hasError("required")&&e.loginForm.get("password").touched&&1==e.ifSubmitted),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",1==e.badResponse),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(16,13,"Profile.Login.login")),d.\u0275\u0275advance(2),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(21,b)),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(19,15,"Profile.Login.Error.Cantlogin?")," "))},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,s.FormGroupDirective,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,i.NgClass,i.NgIf,l.rH],pipes:[u.X$],styles:['.validationcolor[_ngcontent-%COMP%]{border-color:red}.error[_ngcontent-%COMP%]{color:red}.first[_ngcontent-%COMP%]{margin-bottom:20px}.form-control[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-size:14px;font-weight:normal;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.53px;color:#000!important;height:53px;border-radius:2px;border:solid 1px #d6d6d6;background-color:#fff}.card-align[_ngcontent-%COMP%]{margin-top:15%}.cards[_ngcontent-%COMP%]{box-shadow:0 2px 10px #00000026;background-color:#fff;width:70%;margin:auto;padding:3% 5%}.cards[_ngcontent-%COMP%]   .admin[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#264151;margin-bottom:7%}.cards[_ngcontent-%COMP%]   .btn-log[_ngcontent-%COMP%]{height:53px;background-color:#264151;font-family:"Poppins",sans-serif;font-size:18px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#fff;width:100%;margin:5% 0% 3%}.cards[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{font-family:Roboto;cursor:pointer;font-size:14px;font-weight:normal;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#514c4c;text-decoration:underline;text-align:right;margin:3% 0% 5%}']}),F)},{path:"forgot-password",component:function(){var e=function(){function e(n,o){t(this,e),this.fb=n,this.authSandbox=o,this.emailPattern="[a-zA-Z0-9.-_-._]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",this.ifSubmitted=!1}return n(e,[{key:"ngOnInit",value:function(){this.forgotPasswordForm=this.fb.group({email:["",[s.Validators.required,s.Validators.pattern(this.emailPattern)]]})}},{key:"onSubmits",value:function(t,e){var n=this;if(this.ifSubmitted=!0,this.forgotPasswordForm.valid){var o={};o.email=this.forgotPasswordForm.value.email,this.authSandbox.authForget(o),this.authSandbox.forgorPasswordResponse$.subscribe(function(t){(t&&!0===t||!1===t)&&(n.ifSubmitted=!1,n.forgotPasswordForm.reset(),n.forgotPasswordForm.clearValidators())})}else this.validateAllFormFields(this.forgotPasswordForm)}},{key:"validateAllFormFields",value:function(t){var e=this;Object.keys(t.controls).forEach(function(n){var o=t.get(n);o instanceof s.FormControl?o.markAsTouched({onlySelf:!0}):o instanceof s.FormGroup&&e.validateAllFormFields(o)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.\u0275\u0275directiveInject(s.FormBuilder),d.\u0275\u0275directiveInject(c.j))},e.\u0275cmp=d.\u0275\u0275defineComponent({type:e,selectors:[["app-spurt-forgot-password"]],decls:17,vars:20,consts:[[1,"card-align"],[1,"cards"],[3,"formGroup","ngSubmit"],[1,"admin"],["type","text","placeholder","Email","formControlName","email",1,"form-control","placeholder-fix",3,"ngClass"],["class","validation-error",4,"ngIf"],[1,"btn","btn-log"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","pull-right",3,"hidden"],[1,"forgot",3,"routerLink"],[1,"validation-error"]],template:function(t,e){1&t&&(d.\u0275\u0275elementStart(0,"div",0),d.\u0275\u0275elementStart(1,"div",1),d.\u0275\u0275elementStart(2,"form",2),d.\u0275\u0275listener("ngSubmit",function(t){return e.onSubmits(t,e.forgotPasswordForm.value)}),d.\u0275\u0275elementStart(3,"div",3),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(6,"input",4),d.\u0275\u0275template(7,w,3,3,"div",5),d.\u0275\u0275template(8,y,3,3,"div",5),d.\u0275\u0275elementStart(9,"button",6),d.\u0275\u0275text(10),d.\u0275\u0275pipe(11,"translate"),d.\u0275\u0275element(12,"span",7),d.\u0275\u0275pipe(13,"async"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(14,"div",8),d.\u0275\u0275text(15),d.\u0275\u0275pipe(16,"translate"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&t&&(d.\u0275\u0275advance(2),d.\u0275\u0275property("formGroup",e.forgotPasswordForm),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(5,9,"Profile.Login.forgotpassword")),d.\u0275\u0275advance(2),d.\u0275\u0275property("ngClass",d.\u0275\u0275pureFunction1(17,P,e.forgotPasswordForm.get("email").hasError("required")&&e.forgotPasswordForm.get("email").touched&&1==e.ifSubmitted)),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",e.forgotPasswordForm.get("email").hasError("required")&&e.forgotPasswordForm.get("email").touched&&1==e.ifSubmitted),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",e.forgotPasswordForm.get("email").hasError("pattern")&&e.forgotPasswordForm.get("email").touched&&1==e.ifSubmitted),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(11,11,"Profile.Login.Submit"),""),d.\u0275\u0275advance(2),d.\u0275\u0275property("hidden",!d.\u0275\u0275pipeBind1(13,13,e.authSandbox.forgotpasswordLoading$)),d.\u0275\u0275advance(2),d.\u0275\u0275property("routerLink",d.\u0275\u0275pureFunction0(19,S)),d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate(d.\u0275\u0275pipeBind1(16,15,"Profile.Login.BacktoLogin")))},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,s.FormGroupDirective,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,i.NgClass,i.NgIf,l.rH],pipes:[u.X$,i.AsyncPipe],styles:['.validationcolor[_ngcontent-%COMP%]{border-color:red}.error[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-size:14px;font-weight:normal;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.53px;color:#000!important;height:53px;border-radius:2px;border:solid 1px #d6d6d6;background-color:#fff}.card-align[_ngcontent-%COMP%]{margin-top:15%}.cards[_ngcontent-%COMP%]{box-shadow:0 2px 10px #00000026;background-color:#fff;width:70%;margin:auto;padding:3% 5%}.cards[_ngcontent-%COMP%]   .admin[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#264151;margin-bottom:7%}.cards[_ngcontent-%COMP%]   .btn-log[_ngcontent-%COMP%]{height:53px;background-color:#264151;font-family:"Poppins",sans-serif;font-size:18px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#fff;width:100%;margin:5% 0% 3%}.cards[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{font-family:Roboto;cursor:pointer;font-size:14px;font-weight:normal;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#514c4c;text-decoration:underline;text-align:right;margin:3% 0% 5%}']}),e}()}],C=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(x)],l.Bz]}),e}(),E=r(59798),O=r(47417),I=r(6050),k=r(64762),N=r(41964),M=r(5207),_=r(37540),j=r(99922),L=r(44781),A=r(75894),B=n(function e(n,o,r,i){var a=this;t(this,e),this.action$=n,this.authService=o,this.sandbox=r,this.router=i,this.doLogin$=this.action$.pipe((0,I.l4)(L.MF.DO_LOGIN),(0,M.U)(function(t){return t.payload}),(0,_.w)(function(t){return a.authService.login(t).pipe((0,_.w)(function(t){return[new L.Cs(t)]}),(0,A.K)(function(t){return(0,N.of)(new L.Xo(t))}))})),this.doForget$=this.action$.pipe((0,I.l4)(L.MF.DO_FORGOT_PASSWORD),(0,M.U)(function(t){return t.payload}),(0,_.w)(function(t){return a.authService.forgetPassword(t).pipe((0,_.w)(function(t){return[new L.A1(t)]}),(0,A.K)(function(t){return(0,N.of)(new L.cd(t))}))})),this.gettoken$=this.action$.pipe((0,I.l4)(L.MF.GET_TOKEN),(0,M.U)(function(t){return t.payload}),(0,_.w)(function(t){return console.log("eff",t),a.authService.gettoken(t).pipe((0,j.b)(function(t){console.log("get token error",t),t&&2===t.status&&a.router.navigate(["/token-expired"]),t&&3===t.status&&a.router.navigate(["/invalid-token"])}),(0,M.U)(function(t){return new L.vi(t)}),(0,A.K)(function(t){return(0,N.of)(new L.fk(t))}))})),this.setpassword$=this.action$.pipe((0,I.l4)(L.MF.SET_PASSWORD),(0,M.U)(function(t){return t.payload}),(0,_.w)(function(t){return a.authService.setpassword(t).pipe((0,j.b)(function(t){t&&1===t.status&&a.router.navigate(["/auth/login"])}),(0,M.U)(function(t){return new L.j4(t)}),(0,A.K)(function(t){return(0,N.of)(new L.QP(t))}))}))});B.\u0275fac=function(t){return new(t||B)(d.\u0275\u0275inject(I.eX),d.\u0275\u0275inject(O.e),d.\u0275\u0275inject(c.j),d.\u0275\u0275inject(l.F0))},B.\u0275prov=d.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac}),(0,k.gn)([(0,I.Qm)()],B.prototype,"doLogin$",void 0),(0,k.gn)([(0,I.Qm)()],B.prototype,"doForget$",void 0),(0,k.gn)([(0,I.Qm)()],B.prototype,"gettoken$",void 0),(0,k.gn)([(0,I.Qm)()],B.prototype,"setpassword$",void 0);var $=r(20044),z=r(91841),G=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=d.\u0275\u0275defineInjector({providers:[O.e,c.j],imports:[[i.CommonModule,C,a.IJ,s.ReactiveFormsModule,s.FormsModule,E.Rh.forRoot(),I.sQ.forFeature([B]),u.aw.forChild({loader:{provide:u.Zw,useFactory:$.g,deps:[z.eN]}})]]}),e}()}}])}();