!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?r:String(r)),o)}var i,r}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkspurtcommerce=self.webpackChunkspurtcommerce||[]).push([[283],{1666:function(t,o,i){i.r(o),i.d(o,{AccessPermissionModule:function(){return y}});var r=i(38583),a=i(70853),s=i(8300),c=i(37716),l=i(72782),p=function(){return["/settings/access-and-permission/role/list"]};function d(e,t){1&e&&(c.\u0275\u0275elementStart(0,"button",8),c.\u0275\u0275text(1,"Roles"),c.\u0275\u0275elementEnd()),2&e&&c.\u0275\u0275property("appHideIfUnauthorized","settings-role")("routerLink",c.\u0275\u0275pureFunction0(2,p))}function m(e,t){}var u=function(){return["/settings/access-and-permission/user/list"]};function g(e,t){1&e&&(c.\u0275\u0275elementStart(0,"button",8),c.\u0275\u0275text(1,"Users"),c.\u0275\u0275elementEnd()),2&e&&c.\u0275\u0275property("appHideIfUnauthorized","settings-user")("routerLink",c.\u0275\u0275pureFunction0(2,u))}function f(e,t){}var h,b=((h=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||h)},h.\u0275cmp=c.\u0275\u0275defineComponent({type:h,selectors:[["app-access-layout"]],decls:17,vars:0,consts:[[1,"setup-wrapper"],[1,"setup-container","localization-container"],[1,"loc-lay-title"],[1,"card","ap-general","ap-info","set-loc-card"],[1,"localize-tab"],["ngbTabTitle","Audit Log"],["ngbTabContent",""],["ngbTabTitle","Data Back-up"],["routerLinkActive","'active'","routerLinkActive","active",1,"tablinks",3,"appHideIfUnauthorized","routerLink"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275elementStart(3,"h3"),c.\u0275\u0275text(4,"Access and permission"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"p"),c.\u0275\u0275text(6,"In this section the admin can create and maintain different admin roles and permissions. Then, permissions can be assigned for the roles there of. Based on the permission assigned, different roles can access modules for which they have permission. Then, the admin can create users and assign the user to a role and the user will have only those permissions that will be assigned to that role."),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"div",3),c.\u0275\u0275elementStart(8,"div",4),c.\u0275\u0275elementStart(9,"ngb-tabset"),c.\u0275\u0275elementStart(10,"ngb-tab"),c.\u0275\u0275template(11,d,2,3,"ng-template",5),c.\u0275\u0275template(12,m,0,0,"ng-template",6),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(13,"ngb-tab"),c.\u0275\u0275template(14,g,2,3,"ng-template",7),c.\u0275\u0275template(15,f,0,0,"ng-template",6),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(16,"router-outlet"))},directives:[l.T3,l.N_,l.o,l.EU,a.lC,a.Od,a.rH],styles:[".setup-wrapper[_ngcontent-%COMP%]{padding:16px;margin-bottom:0!important}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}.back-buttons[_ngcontent-%COMP%]{background:#f20a6d!important;border:solid thin #dddddd!important;color:#fff!important;padding:4px 16px!important;float:right!important;margin-top:-45px;margin-right:10px}"]}),h),x=i(76388),C=i(3679);function P(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",9),c.\u0275\u0275text(1,"USER - "),c.\u0275\u0275elementStart(2,"b"),c.\u0275\u0275text(3),c.\u0275\u0275pipe(4,"uppercase"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(4,1,null==n.detail?null:n.detail.name))}}function M(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",2),c.\u0275\u0275elementStart(1,"input",18),c.\u0275\u0275listener("ngModelChange",function(e){return c.\u0275\u0275restoreView(n).$implicit.selected=e})("change",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(3).statusChange()}),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(2,"label",19),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit;c.\u0275\u0275advance(1),c.\u0275\u0275propertyInterpolate("id",o.moduleId),c.\u0275\u0275property("value",o.moduleId)("ngModel",o.selected)("checked",o.selected),c.\u0275\u0275advance(1),c.\u0275\u0275propertyInterpolate("for",o.moduleId),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",null==o?null:o.name," ")}}function O(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275elementStart(1,"h3"),c.\u0275\u0275text(2),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",16),c.\u0275\u0275template(4,M,4,6,"div",17),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(null==n?null:n.name),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngForOf",null==n?null:n.permissionModule)}}function w(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",10),c.\u0275\u0275template(1,O,5,2,"div",11),c.\u0275\u0275pipe(2,"async"),c.\u0275\u0275elementStart(3,"div",12),c.\u0275\u0275elementStart(4,"div",13),c.\u0275\u0275elementStart(5,"button",14),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().cancel()}),c.\u0275\u0275text(6," Cancel "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"button",15),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().save()}),c.\u0275\u0275text(8,"Save"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",c.\u0275\u0275pipeBind1(2,1,o.sandbox.getPermissionsList$))}}var v=[{path:"",redirectTo:"role",pathMatch:"full"},{path:"",component:b,children:[{path:"",redirectTo:"role",pathMatch:"full"},{path:"role",loadChildren:function(){return Promise.all([i.e(592),i.e(150)]).then(i.bind(i,4150)).then(function(e){return e.RoleModule})},canActivate:[s.a],data:{permission:"list-role"}},{path:"user",loadChildren:function(){return i.e(619).then(i.bind(i,20619)).then(function(e){return e.UserModule})},canActivate:[s.a],data:{permission:"list-user"}},{path:"permission",component:function(){var t=function(){function t(n,o,i,r){e(this,t),this.route=n,this.sandbox=o,this.changeDetect=i,this.router=r,this.subscriptions=[],this.selectAllPermission=!1}return n(t,[{key:"ngOnInit",value:function(){this.detail=JSON.parse(this.route.snapshot.queryParams.user),this.type=this.detail.type,this.id=this.detail.id,this.getPermissionList(),this.subscribeList()}},{key:"subscribeList",value:function(){var e=this;this.subscriptions.push(this.sandbox.getPermissionsList$.subscribe(function(t){t&&(e.permissionList=t,e.id&&e.getPermission())}))}},{key:"getStatus",value:function(){var e=!0;this.permissionList.forEach(function(t){!e||(e=t.permissionModule.every(function(e){return!0===e.selected}))}),this.selectAllPermission=e}},{key:"getPermissionList",value:function(){this.sandbox.getPermissionlist({})}},{key:"getPermission",value:function(){var e=this,t={};t.refType="user"===this.type?2:1,t.refId=this.id,this.sandbox.getPermission(t),this.subscriptions.push(this.sandbox.permissionLoaded$.subscribe(function(t){t&&e.getStatus()}))}},{key:"save",value:function(){var e=[];this.permissionList.forEach(function(t){t.permissionModule&&t.permissionModule.forEach(function(t){!0===t.selected&&e.push(t.slugName)})});var t={};t.refId=this.id,t.refType="user"===this.type?2:1,t.permission=JSON.stringify(e),this.sandbox.addPermission(t)}},{key:"selectAll",value:function(e){this.sandbox.selectAllPermission(e)}},{key:"cancel",value:function(){this.router.navigate(["/settings/access-and-permission"])}},{key:"statusChange",value:function(){this.getStatus()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.\u0275\u0275directiveInject(a.gz),c.\u0275\u0275directiveInject(x.O),c.\u0275\u0275directiveInject(c.ChangeDetectorRef),c.\u0275\u0275directiveInject(a.F0))},t.\u0275cmp=c.\u0275\u0275defineComponent({type:t,selectors:[["app-permission"]],decls:18,vars:10,consts:[[1,"flex","main-header"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","checkbox22",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","checkbox22",1,"custom-control-label","cursor-pointer"],[1,"permission-wrap"],["class","user",4,"ngIf"],[1,"user-role"],["class","pw-row",4,"ngIf"],[1,"user"],[1,"pw-row"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"flex","srbtn"],[1,"cancel",3,"click"],["type","submit",3,"click"],[1,"form-group","pw-row-full","flex"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"value","ngModel","checked","id","ngModelChange","change"],[1,"custom-control-label","cursor-pointer",3,"for"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"h3"),c.\u0275\u0275text(2,"Permission Status"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",1),c.\u0275\u0275elementStart(4,"div",2),c.\u0275\u0275elementStart(5,"input",3),c.\u0275\u0275listener("ngModelChange",function(e){return t.selectAllPermission=e})("change",function(e){return t.selectAll(e.target.checked)}),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"label",4),c.\u0275\u0275text(7," Select All "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(8,"div",5),c.\u0275\u0275template(9,P,5,3,"span",6),c.\u0275\u0275elementStart(10,"span",7),c.\u0275\u0275text(11,"ROLE - "),c.\u0275\u0275elementStart(12,"b"),c.\u0275\u0275text(13),c.\u0275\u0275pipe(14,"uppercase"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(15,w,9,3,"div",8),c.\u0275\u0275pipe(16,"async"),c.\u0275\u0275pipe(17,"async"),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275advance(5),c.\u0275\u0275property("ngModel",t.selectAllPermission),c.\u0275\u0275advance(4),c.\u0275\u0275property("ngIf","user"===t.type),c.\u0275\u0275advance(4),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(14,4,null==t.detail?null:t.detail.role)),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",c.\u0275\u0275pipeBind1(16,6,t.sandbox.permissionListLoaded$)&&c.\u0275\u0275pipeBind1(17,8,t.sandbox.permissionLoaded$)))},directives:[C.CheckboxControlValueAccessor,C.NgControlStatus,C.NgModel,r.NgIf,r.NgForOf],pipes:[r.UpperCasePipe,r.AsyncPipe],styles:['.main-header[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:0;padding:8px 16px}.main-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:inline-flex;font-size:18px;color:#222;margin-bottom:0;font-weight:500;padding-left:0}.main-header[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;color:#393939}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:-1rem!important}.main-header[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:12px!important;height:12px!important;background-size:102% 60%!important;top:3px!important;left:-1rem!important}.permission-wrap[_ngcontent-%COMP%]{padding:0 16px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]{padding:16px 16px 0;border-bottom:solid 1px #ececec}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#3d3d3d;line-height:1.19;margin-bottom:10px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;align-items:flex-start}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding-left:0;margin:0 32px 12px 0}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{font-size:12px;font-weight:normal;color:#393939;padding-left:20px}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{width:12px!important;height:12px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{width:12px!important;height:12px!important;background-size:102% 60%!important;top:3px!important;left:0rem!important}.permission-wrap[_ngcontent-%COMP%]   .pw-row[_ngcontent-%COMP%]   .pw-row-full.form-group[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#239323!important}.main[_ngcontent-%COMP%]{display:block;background:white;padding:15px 30px 100px}.main[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{float:right;margin-top:10px;width:70px;padding:5px;background-color:#f2086d;border:none;color:#fff}.main[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.main[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .user-role[_ngcontent-%COMP%]{color:#f2086d;margin-bottom:5px;font-size:14px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:800;letter-spacing:.5px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{box-shadow:0 0 2px 1px #cacaca;margin-top:8px;padding:20px 20px 20px 30px;flex-flow:row wrap;box-sizing:border-box;display:flex;height:500px;overflow-y:auto;justify-content:space-between}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]{height:auto;margin-right:1.33%;margin-bottom:30px;flex:1 1 33%;width:30%;box-sizing:border-box;max-width:30%;display:block}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding-bottom:9px;letter-spacing:.5px;border-bottom:2px solid #dadada}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .role-content[_ngcontent-%COMP%]   .role-list[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{margin-top:20px}.save[_ngcontent-%COMP%]{background:#f2086d;border:solid thin transparent;color:#fff;padding:5px 20px;font-size:14px;margin:30px;float:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:35px;height:18px;margin-right:10px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:-8px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:15px;width:15px;left:3px;bottom:2px;background-color:#fff;transition:.4s;border:1px solid #fde0d5}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#f2086d}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #f2086d}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.slider.toggle-slide[_ngcontent-%COMP%]{border-radius:34px}.slider.toggle-slide[_ngcontent-%COMP%]:before{border-radius:50%}']}),t}(),canActivate:[s.a],data:{permission:"edit-role-permission"}}]}],_=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=c.\u0275\u0275defineInjector({imports:[[a.Bz.forChild(v)],a.Bz]}),t}(),y=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=c.\u0275\u0275defineInjector({imports:[[r.CommonModule,_,l.IJ]]}),t}()}}])}();